2020-06-10 10:21:30,599 INFO 5064 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:21:54,457 INFO 5064 [egg-sequelize](19ms) Executed (default): SELECT `p_user`.`id`, `p_user`.`account`, `p_user`.`name`, `p_user`.`gender`, `roles`.`id` AS `roles.id`, `roles`.`name` AS `roles.name` FROM `p_user` AS `p_user` LEFT OUTER JOIN `p_role` AS `roles` ON `p_user`.`role_id` = `roles`.`id` WHERE `p_user`.`account` LIKE '%ad%' AND `p_user`.`status` = 1 LIMIT 3;
2020-06-10 10:21:54,458 INFO 5064 [egg-sequelize](20ms) Executed (default): SELECT count(`p_user`.`id`) AS `count` FROM `p_user` AS `p_user` LEFT OUTER JOIN `p_role` AS `roles` ON `p_user`.`role_id` = `roles`.`id` WHERE `p_user`.`account` LIKE '%ad%' AND `p_user`.`status` = 1;
2020-06-10 10:22:39,788 INFO 5124 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:40:06,014 INFO 5429 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:40:16,004 INFO 5453 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:44:00,831 INFO 5513 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:44:12,533 INFO 5537 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:46:58,582 INFO 5585 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:47:05,310 INFO 5612 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:47:31,021 INFO 5627 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:49:38,000 INFO 5663 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:51:04,043 INFO 5690 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:51:07,178 INFO 5707 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:51:37,577 INFO 5734 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:52:31,796 INFO 5759 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:52:42,678 INFO 5784 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:53:46,101 INFO 5811 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:54:01,559 INFO 5832 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:54:09,248 INFO 5856 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:54:16,140 INFO 5867 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:54:39,603 INFO 5891 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:55:01,966 INFO 5912 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 10:56:29,278 WARN 5912 [-/::1/-/3ms POST /api/reservation/addReservation] nodejs.SyntaxError: Unexpected string in JSON at position 61, check bodyParser config
    at JSON.parse (<anonymous>)
    at parse (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:57:17)
    at AsyncFunction.module.exports [as json] (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:41:20)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async parseBody (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:100:14)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:85:19)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)
status: 400
body: "{\n\t\"from_id\":\"1\",\n\t\"to_id\":\"2\",\n\t\"start_time\":1234567891011\n\t\"method\":1"
pid: 5912
hostname: yudeMacBook-Pro.local

2020-06-10 10:56:48,926 WARN 5912 [-/::1/-/0ms POST /api/reservation/addReservation] nodejs.SyntaxError: Unexpected end of JSON input, check bodyParser config
    at JSON.parse (<anonymous>)
    at parse (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:57:17)
    at AsyncFunction.module.exports [as json] (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:41:20)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async parseBody (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:100:14)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:85:19)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)
status: 400
body: "{\n\t\"from_id\":\"1\",\n\t\"to_id\":\"2\",\n\t\"start_time\":1234567891011,\n\t\"method\":1"
pid: 5912
hostname: yudeMacBook-Pro.local

2020-06-10 11:00:33,834 INFO 5912 [egg-sequelize](13ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 11:00:33,866 INFO 5912 [egg-sequelize](23ms) Executed (default): INSERT INTO `p_reservation` (`id`,`from_id`,`to_id`,`type_name`,`method`,`date_time`,`start_time`,`end_time`,`status`,`state`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?);
2020-06-10 11:00:39,891 INFO 5912 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 11:02:46,678 INFO 6000 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:03:20,527 INFO 6028 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:03:42,055 INFO 6060 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:04:24,462 INFO 6088 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:04:42,654 INFO 6116 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:06:39,918 INFO 6149 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:07:50,812 INFO 6180 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:08:04,722 INFO 6201 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:08:15,242 INFO 6225 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:10:13,658 INFO 6262 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:13:40,202 INFO 6309 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:13:53,176 INFO 6335 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:14:18,682 INFO 6335 [egg-sequelize](3ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:14:41,912 INFO 6362 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:14:43,264 INFO 6362 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:15:03,009 INFO 6383 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:15:04,433 INFO 6383 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:15:04,439 ERROR 6383 [-/::1/-/30ms GET /api/reservation/getList?to_id=2] nodejs.TypeError: Cannot read property 'length' of undefined
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:16:29)
    at async ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:19)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:41:56
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 6383
hostname: yudeMacBook-Pro.local

2020-06-10 11:16:32,443 INFO 6383 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:16:32,449 ERROR 6383 [-/::1/-/12ms GET /api/reservation/getList?to_id=2] nodejs.TypeError: Cannot read property 'length' of undefined
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:16:29)
    at async ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:19)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:41:56
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 6383
hostname: yudeMacBook-Pro.local

2020-06-10 11:16:41,334 INFO 6418 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:16:42,478 INFO 6418 [egg-sequelize](3ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:16:58,958 INFO 6442 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:16:59,803 INFO 6442 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:17:36,319 INFO 6469 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:18:12,075 INFO 6469 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:18:44,607 INFO 6500 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:18:44,888 INFO 6500 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:18:47,488 INFO 6500 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:19:32,993 INFO 6528 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:19:37,287 INFO 6528 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:21:33,562 INFO 6565 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:21:43,726 INFO 6590 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:21:49,865 INFO 6609 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:21:50,220 INFO 6609 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:22:33,438 INFO 6629 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:22:40,705 INFO 6629 [egg-sequelize](5ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:22:52,806 INFO 6653 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:22:53,542 INFO 6653 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:22:54,469 INFO 6653 [egg-sequelize](0ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:22:59,467 INFO 6664 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:23:18,284 INFO 6678 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:23:51,678 INFO 6678 [egg-sequelize](5ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:25:01,652 INFO 6711 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:25:02,896 INFO 6711 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:25:02,905 ERROR 6711 [-/::1/-/30ms GET /api/reservation/getList?to_id=2] nodejs.TypeError: Class constructor _success cannot be invoked without 'new'
    at /Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:35:29
    at Array.forEach (<anonymous>)
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:16:16)
    at async ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:19)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:41:56
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 6711
hostname: yudeMacBook-Pro.local

2020-06-10 11:25:16,863 INFO 6735 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:25:21,906 INFO 6747 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:25:24,143 INFO 6747 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:27:50,399 INFO 6791 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:27:53,538 INFO 6791 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:28:42,645 INFO 6821 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:28:50,134 INFO 6842 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:28:50,672 INFO 6842 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:28:59,209 INFO 6857 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:29:02,418 INFO 6869 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:29:05,038 INFO 6873 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:29:06,037 INFO 6873 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:29:21,028 INFO 6897 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:29:22,529 INFO 6897 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:30:48,423 INFO 6945 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:30:48,620 INFO 6945 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:31:16,745 INFO 6971 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:31:22,150 ERROR 6971 [-/::1/-/25ms GET /api/reservation/getList?to_id=2] nodejs.SequelizeEagerLoadingError: p_user is not associated to p_reservation!
    at Function._getIncludedAssociation (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:715:13)
    at Function._validateIncludedElement (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:619:53)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:516:37
    at Array.map (<anonymous>)
    at Function._validateIncludedElements (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:511:39)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1726:14
    at tryCatcher (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:729:18)
    at _drainQueueStep (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:93:12)
    at _drainQueue (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)
From previous event:
    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/debuggability.js:482:19)
    at Promise._then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:261:17)
    at Promise.then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:154:17)
    at Function.findAll (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1720:8)
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:11:39)
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:45)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
name: "SequelizeEagerLoadingError"
pid: 6971
hostname: yudeMacBook-Pro.local

2020-06-10 11:33:24,234 INFO 7029 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:33:26,090 INFO 7040 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:33:32,129 ERROR 7040 [-/::1/-/22ms GET /api/reservation/getList?to_id=2] nodejs.SequelizeEagerLoadingError: p_user is not associated to p_reservation!
    at Function._getIncludedAssociation (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:715:13)
    at Function._validateIncludedElement (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:619:53)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:516:37
    at Array.map (<anonymous>)
    at Function._validateIncludedElements (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:511:39)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1726:14
    at tryCatcher (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:729:18)
    at _drainQueueStep (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:93:12)
    at _drainQueue (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)
From previous event:
    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/debuggability.js:482:19)
    at Promise._then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:261:17)
    at Promise.then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:154:17)
    at Function.findAll (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1720:8)
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:11:39)
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:45)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
name: "SequelizeEagerLoadingError"
pid: 7040
hostname: yudeMacBook-Pro.local

2020-06-10 11:34:03,792 INFO 7064 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:34:03,799 INFO 7064 [egg-sequelize](5ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:34:03,803 INFO 7064 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:34:03,805 INFO 7064 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:03,833 INFO 7064 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:34:03,846 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:34:03,858 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:34:03,870 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:34:03,887 INFO 7064 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:34:03,898 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:34:03,911 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:03,916 INFO 7064 [egg-sequelize](4ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:34:03,919 INFO 7064 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:34:03,921 INFO 7064 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:34:03,921 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:03,936 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:34:03,948 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:34:03,949 INFO 7064 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:34:03,951 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:34:03,953 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:34:03,953 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:03,968 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:34:03,981 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:34:03,994 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:34:04,005 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:34:04,018 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,020 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:34:04,022 INFO 7064 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:34:04,025 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:34:04,026 INFO 7064 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,040 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:34:04,053 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,054 INFO 7064 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:34:04,057 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:34:04,060 INFO 7064 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:34:04,061 INFO 7064 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,077 INFO 7064 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:34:04,091 INFO 7064 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:34:04,103 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:34:04,116 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:34:04,128 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:34:04,141 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:34:04,153 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:34:04,165 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:34:04,177 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:34:04,189 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:34:04,204 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:34:04,218 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:34:04,231 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:34:04,244 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:34:04,256 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:34:04,269 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:34:04,272 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,289 INFO 7064 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:34:04,319 INFO 7064 [egg-sequelize](29ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:34:04,335 INFO 7064 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,338 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:34:04,341 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:34:04,344 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:34:04,346 INFO 7064 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,360 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:34:04,361 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,374 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:34:04,395 INFO 7064 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:34:04,409 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:34:04,420 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:34:04,432 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,434 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:34:04,436 INFO 7064 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:34:04,440 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:34:04,440 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,442 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_10' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,456 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_10`;
2020-06-10 11:34:04,458 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_11' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,474 INFO 7064 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_11`;
2020-06-10 11:34:04,495 INFO 7064 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:34:04,515 INFO 7064 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:34:04,517 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_12' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,531 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_12`;
2020-06-10 11:34:04,551 INFO 7064 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:34:04,567 INFO 7064 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:34:04,579 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:34:04,592 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,594 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:34:04,596 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:34:04,598 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:34:04,599 INFO 7064 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,612 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:34:04,624 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:34:04,637 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,639 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,651 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:34:04,669 INFO 7064 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:34:04,671 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:34:04,673 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:34:04,675 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:34:04,676 INFO 7064 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,677 INFO 7064 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,691 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:34:04,693 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,705 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:34:04,726 INFO 7064 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:34:04,747 INFO 7064 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:34:04,762 INFO 7064 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:34:04,774 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:34:04,787 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:34:04,799 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:34:04,810 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:34:04,822 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:34:04,835 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:34:04,847 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:04,849 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:34:04,851 INFO 7064 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:34:04,856 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:34:04,857 INFO 7064 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:04,858 INFO 7064 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,872 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:34:04,874 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:34:04,885 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:34:04,904 INFO 7064 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:34:04,928 INFO 7064 [egg-sequelize](23ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:34:04,944 INFO 7064 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:34:04,957 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:34:04,970 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:34:04,982 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:34:04,995 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:34:05,007 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:34:05,018 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:05,020 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:34:05,023 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:34:05,025 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:34:05,025 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:05,039 INFO 7064 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:34:05,052 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:34:05,063 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:05,065 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:34:05,067 INFO 7064 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:34:05,068 INFO 7064 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:34:05,069 INFO 7064 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:34:05,083 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:34:05,094 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:34:05,106 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:34:05,118 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:34:05,131 INFO 7064 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:34:05,142 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:34:05,154 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:34:05,166 INFO 7064 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:34:05,178 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:34:05,190 INFO 7064 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:34:05,192 INFO 7064 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:34:10,089 ERROR 7064 [-/::1/-/24ms GET /api/reservation/getList?to_id=2] nodejs.SequelizeEagerLoadingError: p_user is not associated to p_reservation!
    at Function._getIncludedAssociation (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:715:13)
    at Function._validateIncludedElement (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:619:53)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:516:37
    at Array.map (<anonymous>)
    at Function._validateIncludedElements (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:511:39)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1726:14
    at tryCatcher (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:729:18)
    at _drainQueueStep (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:93:12)
    at _drainQueue (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)
From previous event:
    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/debuggability.js:482:19)
    at Promise._then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:261:17)
    at Promise.then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:154:17)
    at Function.findAll (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1720:8)
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:11:39)
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:45)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
name: "SequelizeEagerLoadingError"
pid: 7064
hostname: yudeMacBook-Pro.local

2020-06-10 11:35:07,108 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:35:07,110 INFO 7469 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:35:07,114 INFO 7469 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:35:07,115 INFO 7469 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,129 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:35:07,141 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:35:07,153 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:35:07,165 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:35:07,177 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:35:07,189 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:35:07,201 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,203 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:35:07,210 INFO 7469 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:35:07,213 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:35:07,213 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,226 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:35:07,239 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:35:07,240 INFO 7469 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:35:07,242 INFO 7469 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:35:07,245 INFO 7469 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:35:07,245 INFO 7469 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,258 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:35:07,270 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:35:07,282 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:35:07,294 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:35:07,306 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,308 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:35:07,310 INFO 7469 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:35:07,312 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:35:07,312 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,325 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:35:07,338 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,339 INFO 7469 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:35:07,342 INFO 7469 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:35:07,346 INFO 7469 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:35:07,347 INFO 7469 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,361 INFO 7469 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:35:07,374 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:35:07,386 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:35:07,398 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:35:07,410 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:35:07,422 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:35:07,433 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:35:07,445 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:35:07,458 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:35:07,470 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:35:07,481 INFO 7469 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:35:07,493 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:35:07,505 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:35:07,517 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:35:07,529 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:35:07,541 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:35:07,543 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,555 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:35:07,574 INFO 7469 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:35:07,587 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,589 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:35:07,591 INFO 7469 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:35:07,593 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:35:07,594 INFO 7469 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,606 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:35:07,608 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,620 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:35:07,637 INFO 7469 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:35:07,649 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:35:07,661 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:35:07,672 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,674 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:35:07,676 INFO 7469 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:35:07,678 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:35:07,679 INFO 7469 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,680 INFO 7469 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_13' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,693 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_13`;
2020-06-10 11:35:07,695 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_14' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,707 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_14`;
2020-06-10 11:35:07,725 INFO 7469 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:35:07,746 INFO 7469 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:35:07,748 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_15' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,760 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_15`;
2020-06-10 11:35:07,779 INFO 7469 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:35:07,794 INFO 7469 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:35:07,806 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:35:07,817 INFO 7469 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,819 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:35:07,821 INFO 7469 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:35:07,822 INFO 7469 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:35:07,823 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,837 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:35:07,849 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:35:07,861 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:07,865 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,877 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:35:07,896 INFO 7469 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:35:07,898 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:35:07,900 INFO 7469 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:35:07,902 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:35:07,903 INFO 7469 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:07,904 INFO 7469 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,921 INFO 7469 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:35:07,922 INFO 7469 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:07,934 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:35:07,953 INFO 7469 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:35:07,975 INFO 7469 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:35:07,987 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:35:07,999 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:35:08,011 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:35:08,026 INFO 7469 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:35:08,038 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:35:08,049 INFO 7469 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:35:08,061 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:35:08,073 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:08,075 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:35:08,077 INFO 7469 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:35:08,080 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:35:08,080 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:08,082 INFO 7469 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:08,096 INFO 7469 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:35:08,097 INFO 7469 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:35:08,110 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:35:08,129 INFO 7469 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:35:08,150 INFO 7469 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:35:08,162 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:35:08,175 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:35:08,189 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:35:08,201 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:35:08,214 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:35:08,227 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:35:08,239 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:08,240 INFO 7469 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:35:08,242 INFO 7469 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:35:08,245 INFO 7469 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:35:08,245 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:08,259 INFO 7469 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:35:08,271 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:35:08,288 INFO 7469 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:08,290 INFO 7469 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:35:08,294 INFO 7469 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:35:08,296 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:35:08,296 INFO 7469 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:35:08,310 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:35:08,322 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:35:08,334 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:35:08,346 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:35:08,358 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:35:08,371 INFO 7469 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:35:08,383 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:35:08,395 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:35:08,407 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:35:08,419 INFO 7469 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:35:08,421 INFO 7469 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:36:01,660 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:36:01,662 INFO 7854 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:36:01,667 INFO 7854 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:36:01,668 INFO 7854 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:01,682 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:36:01,694 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:36:01,708 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:36:01,719 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:36:01,731 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:36:01,743 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:36:01,755 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:01,758 INFO 7854 [egg-sequelize](2ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:36:01,764 INFO 7854 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:36:01,766 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:36:01,766 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:01,779 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:36:01,791 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:36:01,793 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:36:01,795 INFO 7854 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:36:01,797 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:36:01,798 INFO 7854 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:01,810 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:36:01,822 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:36:01,834 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:36:01,846 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:36:01,858 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:01,860 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:36:01,862 INFO 7854 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:36:01,865 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:36:01,865 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:01,879 INFO 7854 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:36:01,890 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:01,892 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:36:01,894 INFO 7854 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:36:01,899 INFO 7854 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:36:01,900 INFO 7854 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:01,914 INFO 7854 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:36:01,926 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:36:01,938 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:36:01,950 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:36:01,962 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:36:01,974 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:36:01,985 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:36:01,997 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:36:02,009 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:36:02,021 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:36:02,032 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:36:02,044 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:36:02,056 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:36:02,068 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:36:02,079 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:36:02,091 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:36:02,094 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,107 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:36:02,126 INFO 7854 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:36:02,139 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,140 INFO 7854 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:36:02,142 INFO 7854 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:36:02,144 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:36:02,146 INFO 7854 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,160 INFO 7854 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:36:02,161 INFO 7854 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,173 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:36:02,190 INFO 7854 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:36:02,202 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:36:02,213 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:36:02,225 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,227 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:36:02,229 INFO 7854 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:36:02,232 INFO 7854 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:36:02,232 INFO 7854 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,234 INFO 7854 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_16' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,247 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_16`;
2020-06-10 11:36:02,248 INFO 7854 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_17' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,261 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_17`;
2020-06-10 11:36:02,282 INFO 7854 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:36:02,302 INFO 7854 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:36:02,304 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_18' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,317 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_18`;
2020-06-10 11:36:02,335 INFO 7854 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:36:02,350 INFO 7854 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:36:02,361 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:36:02,373 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,375 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:36:02,377 INFO 7854 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:36:02,380 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:36:02,381 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,393 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:36:02,405 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:36:02,416 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,421 INFO 7854 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,433 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:36:02,452 INFO 7854 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:36:02,453 INFO 7854 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:36:02,455 INFO 7854 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:36:02,462 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:36:02,463 INFO 7854 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,464 INFO 7854 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,478 INFO 7854 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:36:02,480 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,492 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:36:02,511 INFO 7854 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:36:02,534 INFO 7854 [egg-sequelize](22ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:36:02,549 INFO 7854 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:36:02,561 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:36:02,573 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:36:02,585 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:36:02,597 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:36:02,609 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:36:02,621 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:36:02,633 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,634 INFO 7854 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:36:02,636 INFO 7854 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:36:02,638 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:36:02,639 INFO 7854 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,640 INFO 7854 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,659 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:36:02,661 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:36:02,674 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:36:02,693 INFO 7854 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:36:02,713 INFO 7854 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:36:02,726 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:36:02,739 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:36:02,753 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:36:02,766 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:36:02,779 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:36:02,790 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:36:02,802 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,804 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:36:02,805 INFO 7854 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:36:02,807 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:36:02,808 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,822 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:36:02,835 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:36:02,846 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,848 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:36:02,850 INFO 7854 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:36:02,852 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:36:02,852 INFO 7854 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:36:02,865 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:36:02,876 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:36:02,888 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:36:02,900 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:36:02,913 INFO 7854 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:36:02,925 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:36:02,950 INFO 7854 [egg-sequelize](24ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:36:02,962 INFO 7854 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:36:02,976 INFO 7854 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:36:02,987 INFO 7854 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:36:02,989 INFO 7854 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:36:05,485 INFO 7854 [egg-sequelize](3ms) Executed (default): SELECT `p_reservation`.`id`, `p_reservation`.`from_id`, `p_reservation`.`to_id`, `p_reservation`.`type_name`, `p_reservation`.`method`, `p_reservation`.`date_time`, `p_reservation`.`start_time`, `p_reservation`.`end_time`, `p_reservation`.`status`, `p_reservation`.`state`, `p_user`.`id` AS `p_user.id`, `p_user`.`account` AS `p_user.account`, `p_user`.`phone` AS `p_user.phone`, `p_user`.`password` AS `p_user.password`, `p_user`.`name` AS `p_user.name`, `p_user`.`birthday` AS `p_user.birthday`, `p_user`.`gender` AS `p_user.gender`, `p_user`.`avatar` AS `p_user.avatar`, `p_user`.`criminal_id` AS `p_user.criminal_id`, `p_user`.`justice_id` AS `p_user.justice_id`, `p_user`.`parent_id` AS `p_user.parent_id`, `p_user`.`is_marry` AS `p_user.is_marry`, `p_user`.`education` AS `p_user.education`, `p_user`.`job` AS `p_user.job`, `p_user`.`urgent_name` AS `p_user.urgent_name`, `p_user`.`urgent_relation` AS `p_user.urgent_relation`, `p_user`.`urgent_phone` AS `p_user.urgent_phone`, `p_user`.`role_id` AS `p_user.role_id`, `p_user`.`status` AS `p_user.status` FROM `p_reservation` AS `p_reservation` LEFT OUTER JOIN `p_user` AS `p_user` ON `p_reservation`.`to_id` = `p_user`.`id` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:37:08,245 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:37:08,247 INFO 8259 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:37:08,251 INFO 8259 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:37:08,252 INFO 8259 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,266 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:37:08,278 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:37:08,291 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:37:08,302 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:37:08,315 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:37:08,326 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:37:08,338 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:08,341 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:37:08,343 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:37:08,349 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:37:08,350 INFO 8259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,363 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:37:08,375 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:37:08,377 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:37:08,379 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:37:08,381 INFO 8259 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:37:08,382 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,395 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:37:08,407 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:37:08,418 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:37:08,431 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:37:08,443 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:08,444 INFO 8259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:37:08,446 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:37:08,448 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:37:08,449 INFO 8259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,462 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:37:08,473 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:08,475 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:37:08,478 INFO 8259 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:37:08,480 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:37:08,481 INFO 8259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,495 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:37:08,506 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:37:08,519 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:37:08,531 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:37:08,543 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:37:08,556 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:37:08,568 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:37:08,579 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:37:08,592 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:37:08,603 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:37:08,615 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:37:08,627 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:37:08,639 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:37:08,651 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:37:08,663 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:37:08,676 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:37:08,678 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:08,690 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:37:08,711 INFO 8259 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:37:08,724 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:08,726 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:37:08,728 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:37:08,731 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:37:08,731 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,743 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:37:08,745 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:08,759 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:37:08,776 INFO 8259 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:37:08,789 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:37:08,801 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:37:08,813 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:08,815 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:37:08,816 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:37:08,818 INFO 8259 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:37:08,819 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,820 INFO 8259 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_19' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:08,835 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_19`;
2020-06-10 11:37:08,836 INFO 8259 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_20' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:08,849 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_20`;
2020-06-10 11:37:08,867 INFO 8259 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:37:08,888 INFO 8259 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:37:08,891 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_21' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:08,903 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_21`;
2020-06-10 11:37:08,924 INFO 8259 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:37:08,939 INFO 8259 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:37:08,950 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:37:08,962 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:08,964 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:37:08,966 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:37:08,968 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:37:08,969 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:08,981 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:37:08,993 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:37:09,005 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:09,007 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:09,021 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:37:09,037 INFO 8259 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:37:09,039 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:37:09,042 INFO 8259 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:37:09,045 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:37:09,046 INFO 8259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:09,048 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:09,061 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:37:09,063 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:09,075 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:37:09,094 INFO 8259 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:37:09,115 INFO 8259 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:37:09,131 INFO 8259 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:37:09,143 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:37:09,155 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:37:09,167 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:37:09,178 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:37:09,190 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:37:09,202 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:37:09,213 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:09,215 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:37:09,217 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:37:09,226 INFO 8259 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:37:09,227 INFO 8259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:09,228 INFO 8259 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:09,242 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:37:09,244 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:37:09,255 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:37:09,282 INFO 8259 [egg-sequelize](26ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:37:09,324 INFO 8259 [egg-sequelize](41ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:37:09,337 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:37:09,349 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:37:09,362 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:37:09,375 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:37:09,386 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:37:09,398 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:37:09,410 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:09,412 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:37:09,413 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:37:09,415 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:37:09,416 INFO 8259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:09,429 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:37:09,441 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:37:09,454 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:09,456 INFO 8259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:37:09,459 INFO 8259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:37:09,464 INFO 8259 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:37:09,464 INFO 8259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:37:09,478 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:37:09,492 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:37:09,505 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:37:09,519 INFO 8259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:37:09,531 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:37:09,543 INFO 8259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:37:09,555 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:37:09,567 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:37:09,579 INFO 8259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:37:09,593 INFO 8259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:37:09,595 INFO 8259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:37:11,524 ERROR 8259 [-/::1/-/23ms GET /api/reservation/getList?to_id=2] nodejs.SequelizeEagerLoadingError: p_user is associated to p_reservation multiple times. To identify the correct association, you must use the 'as' keyword to specify the alias of the association you want to include.
    at Function._getIncludedAssociation (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:732:13)
    at Function._validateIncludedElement (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:619:53)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:516:37
    at Array.map (<anonymous>)
    at Function._validateIncludedElements (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:511:39)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1726:14
    at tryCatcher (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:729:18)
    at _drainQueueStep (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:93:12)
    at _drainQueue (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)
From previous event:
    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/debuggability.js:482:19)
    at Promise._then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:261:17)
    at Promise.then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:154:17)
    at Function.findAll (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1720:8)
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:11:39)
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:45)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
name: "SequelizeEagerLoadingError"
pid: 8259
hostname: yudeMacBook-Pro.local

2020-06-10 11:41:22,370 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:41:22,371 INFO 8687 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:41:22,376 INFO 8687 [egg-sequelize](3ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:41:22,377 INFO 8687 [egg-sequelize](4ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,391 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:41:22,404 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:41:22,417 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:41:22,430 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:41:22,443 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:41:22,457 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:41:22,471 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:22,477 INFO 8687 [egg-sequelize](2ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:41:22,485 INFO 8687 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:41:22,487 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:41:22,488 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,503 INFO 8687 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:41:22,515 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:41:22,517 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:41:22,519 INFO 8687 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:41:22,522 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:41:22,522 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,536 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:41:22,547 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:41:22,559 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:41:22,571 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:41:22,583 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:22,584 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:41:22,586 INFO 8687 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:41:22,588 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:41:22,588 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,605 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:41:22,617 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:22,619 INFO 8687 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:41:22,621 INFO 8687 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:41:22,629 INFO 8687 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:41:22,630 INFO 8687 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,644 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:41:22,656 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:41:22,669 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:41:22,681 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:41:22,694 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:41:22,707 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:41:22,718 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:41:22,730 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:41:22,742 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:41:22,755 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:41:22,766 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:41:22,779 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:41:22,790 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:41:22,802 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:41:22,814 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:41:22,827 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:41:22,830 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:22,842 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:41:22,864 INFO 8687 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:41:22,877 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:22,879 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:41:22,881 INFO 8687 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:41:22,883 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:41:22,883 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,896 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:41:22,897 INFO 8687 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:22,910 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:41:22,928 INFO 8687 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:41:22,939 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:41:22,951 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:41:22,963 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:22,965 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:41:22,967 INFO 8687 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:41:22,971 INFO 8687 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:41:22,971 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:22,973 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_22' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:22,991 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_22`;
2020-06-10 11:41:22,993 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_23' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,149 ERROR 8259 [-/::1/-/4ms GET /api/reservation/getList?to_id=2] nodejs.SequelizeEagerLoadingError: p_user is associated to p_reservation multiple times. To identify the correct association, you must use the 'as' keyword to specify the alias of the association you want to include.
    at Function._getIncludedAssociation (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:732:13)
    at Function._validateIncludedElement (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:619:53)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:516:37
    at Array.map (<anonymous>)
    at Function._validateIncludedElements (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:511:39)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1726:14
    at tryCatcher (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/util.js:16:23)
    at Promise._settlePromiseFromHandler (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:547:31)
    at Promise._settlePromise (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:604:18)
    at Promise._settlePromise0 (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:649:10)
    at Promise._settlePromises (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:729:18)
    at _drainQueueStep (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:93:12)
    at _drainQueue (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:86:9)
    at Async._drainQueues (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:102:5)
    at Immediate.Async.drainQueues [as _onImmediate] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/async.js:15:14)
    at processImmediate (internal/timers.js:456:21)
From previous event:
    at Promise.longStackTracesCaptureStackTrace [as _captureStackTrace] (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/debuggability.js:482:19)
    at Promise._then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:261:17)
    at Promise.then (/Users/yuakira/dev/projects/Psychology2/node_modules/_bluebird@3.7.2@bluebird/js/release/promise.js:154:17)
    at Function.findAll (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/model.js:1720:8)
    at ReservationService.getList (/Users/yuakira/dev/projects/Psychology2/app/service/reservation.js:11:39)
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:96:45)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
name: "SequelizeEagerLoadingError"
pid: 8259
hostname: yudeMacBook-Pro.local

2020-06-10 11:41:23,006 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_23`;
2020-06-10 11:41:23,026 INFO 8687 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:41:23,050 INFO 8687 [egg-sequelize](23ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:41:23,052 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_24' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,073 INFO 8687 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_24`;
2020-06-10 11:41:23,093 INFO 8687 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:41:23,107 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:41:23,121 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:41:23,133 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:23,135 INFO 8687 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:41:23,139 INFO 8687 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:41:23,142 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:41:23,150 INFO 8687 [egg-sequelize](9ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:23,170 INFO 8687 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:41:23,183 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:41:23,198 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:23,200 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,217 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:41:23,236 INFO 8687 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:41:23,238 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:41:23,240 INFO 8687 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:41:23,246 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:41:23,247 INFO 8687 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:23,248 INFO 8687 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,262 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:41:23,264 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,277 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:41:23,307 INFO 8687 [egg-sequelize](28ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:41:23,340 INFO 8687 [egg-sequelize](32ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:41:23,356 INFO 8687 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:41:23,369 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:41:23,382 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:41:23,395 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:41:23,406 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:41:23,419 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:41:23,430 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:41:23,442 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:23,444 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:41:23,447 INFO 8687 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:41:23,450 INFO 8687 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:41:23,450 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:23,452 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,466 INFO 8687 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:41:23,468 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:41:23,480 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:41:23,501 INFO 8687 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:41:23,522 INFO 8687 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:41:23,535 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:41:23,549 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:41:23,562 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:41:23,575 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:41:23,586 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:41:23,598 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:41:23,610 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:23,612 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:41:23,614 INFO 8687 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:41:23,616 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:41:23,616 INFO 8687 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:23,631 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:41:23,645 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:41:23,658 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:23,660 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:41:23,662 INFO 8687 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:41:23,664 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:41:23,665 INFO 8687 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:41:23,678 INFO 8687 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:41:23,690 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:41:23,702 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:41:23,714 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:41:23,726 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:41:23,738 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:41:23,750 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:41:23,762 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:41:23,774 INFO 8687 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:41:23,785 INFO 8687 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:41:23,788 INFO 8687 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:41:31,463 INFO 8687 [egg-sequelize](4ms) Executed (default): SELECT `p_reservation`.`id`, `p_reservation`.`from_id`, `p_reservation`.`to_id`, `p_reservation`.`type_name`, `p_reservation`.`method`, `p_reservation`.`date_time`, `p_reservation`.`start_time`, `p_reservation`.`end_time`, `p_reservation`.`status`, `p_reservation`.`state`, `from`.`id` AS `from.id`, `from`.`account` AS `from.account`, `from`.`phone` AS `from.phone`, `from`.`password` AS `from.password`, `from`.`name` AS `from.name`, `from`.`birthday` AS `from.birthday`, `from`.`gender` AS `from.gender`, `from`.`avatar` AS `from.avatar`, `from`.`criminal_id` AS `from.criminal_id`, `from`.`justice_id` AS `from.justice_id`, `from`.`parent_id` AS `from.parent_id`, `from`.`is_marry` AS `from.is_marry`, `from`.`education` AS `from.education`, `from`.`job` AS `from.job`, `from`.`urgent_name` AS `from.urgent_name`, `from`.`urgent_relation` AS `from.urgent_relation`, `from`.`urgent_phone` AS `from.urgent_phone`, `from`.`role_id` AS `from.role_id`, `from`.`status` AS `from.status`, `to`.`id` AS `to.id`, `to`.`account` AS `to.account`, `to`.`phone` AS `to.phone`, `to`.`password` AS `to.password`, `to`.`name` AS `to.name`, `to`.`birthday` AS `to.birthday`, `to`.`gender` AS `to.gender`, `to`.`avatar` AS `to.avatar`, `to`.`criminal_id` AS `to.criminal_id`, `to`.`justice_id` AS `to.justice_id`, `to`.`parent_id` AS `to.parent_id`, `to`.`is_marry` AS `to.is_marry`, `to`.`education` AS `to.education`, `to`.`job` AS `to.job`, `to`.`urgent_name` AS `to.urgent_name`, `to`.`urgent_relation` AS `to.urgent_relation`, `to`.`urgent_phone` AS `to.urgent_phone`, `to`.`role_id` AS `to.role_id`, `to`.`status` AS `to.status` FROM `p_reservation` AS `p_reservation` LEFT OUTER JOIN `p_user` AS `from` ON `p_reservation`.`from_id` = `from`.`id` LEFT OUTER JOIN `p_user` AS `to` ON `p_reservation`.`to_id` = `to`.`id` WHERE `p_reservation`.`to_id` = '2';
2020-06-10 11:47:43,446 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:47:43,447 INFO 9176 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:43,451 INFO 9176 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:47:43,452 INFO 9176 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:43,468 INFO 9176 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:47:43,481 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:47:43,493 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:47:43,506 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:47:43,518 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:47:43,533 INFO 9176 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:47:43,545 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:43,549 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:47:43,553 INFO 9176 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:43,558 INFO 9176 [egg-sequelize](4ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:47:43,559 INFO 9176 [egg-sequelize](4ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:43,574 INFO 9176 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:47:43,586 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:47:43,588 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:47:43,590 INFO 9176 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:43,592 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:47:43,592 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:43,610 INFO 9176 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:47:43,622 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:47:43,634 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:47:43,646 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:47:43,659 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:43,661 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:47:43,663 INFO 9176 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:43,666 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:47:43,666 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:43,680 INFO 9176 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:47:43,694 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:43,696 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:47:43,699 INFO 9176 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:43,701 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:47:43,702 INFO 9176 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:43,717 INFO 9176 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:47:43,730 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:47:43,742 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:47:43,754 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:47:43,766 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:47:43,778 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:47:43,790 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:47:43,802 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:47:43,814 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:47:43,827 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:47:43,839 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:47:43,851 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:47:43,863 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:47:43,876 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:47:43,888 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:47:43,900 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:47:43,902 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:43,915 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:47:43,946 INFO 9176 [egg-sequelize](30ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:47:43,962 INFO 9176 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:43,964 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:47:43,967 INFO 9176 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:47:43,970 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:47:43,971 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:43,984 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:47:43,986 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:43,999 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:47:44,017 INFO 9176 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:44,029 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:47:44,047 INFO 9176 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:47:44,060 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,062 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:47:44,065 INFO 9176 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:44,067 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:47:44,067 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:44,069 INFO 9176 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_25' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,082 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_25`;
2020-06-10 11:47:44,084 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_26' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,095 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_26`;
2020-06-10 11:47:44,114 INFO 9176 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:44,136 INFO 9176 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:44,139 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_27' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,151 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_27`;
2020-06-10 11:47:44,172 INFO 9176 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:44,188 INFO 9176 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:47:44,200 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:47:44,212 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,214 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:47:44,216 INFO 9176 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:44,218 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:47:44,219 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:44,232 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:47:44,244 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:47:44,256 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,257 INFO 9176 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,269 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:47:44,289 INFO 9176 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:47:44,290 INFO 9176 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:47:44,292 INFO 9176 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:44,295 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:47:44,295 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:44,297 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,310 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:47:44,312 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,325 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:47:44,344 INFO 9176 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:47:44,372 INFO 9176 [egg-sequelize](27ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:47:44,388 INFO 9176 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:47:44,401 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:47:44,414 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:47:44,427 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:47:44,439 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:47:44,451 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:47:44,463 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:47:44,478 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,482 INFO 9176 [egg-sequelize](2ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:47:44,484 INFO 9176 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:44,487 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:47:44,488 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:44,489 INFO 9176 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,503 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:47:44,504 INFO 9176 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:44,516 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:47:44,538 INFO 9176 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:44,561 INFO 9176 [egg-sequelize](22ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:44,575 INFO 9176 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:47:44,591 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:47:44,606 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:47:44,618 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:47:44,630 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:47:44,645 INFO 9176 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,664 INFO 9176 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:47:44,668 INFO 9176 [egg-sequelize](2ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:47:44,670 INFO 9176 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:44,675 INFO 9176 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:47:44,676 INFO 9176 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:44,691 INFO 9176 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:47:44,703 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:47:44,716 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,718 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:47:44,723 INFO 9176 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:44,725 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:47:44,726 INFO 9176 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:44,755 INFO 9176 [egg-sequelize](28ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:47:44,767 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:47:44,780 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:47:44,793 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:47:44,805 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:47:44,818 INFO 9176 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:47:44,836 INFO 9176 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:47:44,848 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:47:44,860 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:47:44,872 INFO 9176 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:44,874 INFO 9176 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:47:51,579 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:47:51,580 INFO 9198 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:51,585 INFO 9198 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:47:51,586 INFO 9198 [egg-sequelize](4ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:51,605 INFO 9198 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:47:51,617 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:47:51,629 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:47:51,641 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:47:51,654 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:47:51,666 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:47:51,678 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:51,681 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:47:51,689 INFO 9198 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:51,691 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:47:51,692 INFO 9198 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:51,705 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:47:51,717 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:47:51,719 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:47:51,721 INFO 9198 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:51,723 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:47:51,724 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:51,735 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:47:51,748 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:47:51,759 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:47:51,773 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:47:51,784 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:51,786 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:47:51,789 INFO 9198 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:51,791 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:47:51,791 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:51,803 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:47:51,816 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:51,818 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:47:51,820 INFO 9198 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:51,825 INFO 9198 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:47:51,826 INFO 9198 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:51,839 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:47:51,851 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:47:51,864 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:47:51,877 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:47:51,891 INFO 9198 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:47:51,904 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:47:51,916 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:47:51,928 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:47:51,940 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:47:51,952 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:47:51,965 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:47:51,976 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:47:51,988 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:47:52,000 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:47:52,012 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:47:52,025 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:47:52,028 INFO 9198 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,042 INFO 9198 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:47:52,061 INFO 9198 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:47:52,073 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,075 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:47:52,077 INFO 9198 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:47:52,078 INFO 9198 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:47:52,079 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,091 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:47:52,092 INFO 9198 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,105 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:47:52,123 INFO 9198 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:52,134 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:47:52,146 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:47:52,160 INFO 9198 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,163 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:47:52,165 INFO 9198 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:52,174 INFO 9198 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:47:52,175 INFO 9198 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,177 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_28' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,189 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_28`;
2020-06-10 11:47:52,190 INFO 9198 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_29' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,203 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_29`;
2020-06-10 11:47:52,225 INFO 9198 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:52,244 INFO 9198 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:52,246 INFO 9198 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_30' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,259 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_30`;
2020-06-10 11:47:52,280 INFO 9198 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:52,296 INFO 9198 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:47:52,308 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:47:52,320 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,322 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:47:52,325 INFO 9198 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:52,327 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:47:52,327 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,339 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:47:52,351 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:47:52,367 INFO 9198 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,369 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,383 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:47:52,401 INFO 9198 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:47:52,403 INFO 9198 [egg-sequelize](2ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:47:52,405 INFO 9198 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:52,407 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:47:52,408 INFO 9198 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,410 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,422 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:47:52,424 INFO 9198 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,437 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:47:52,456 INFO 9198 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:47:52,477 INFO 9198 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:47:52,488 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:47:52,517 INFO 9198 [egg-sequelize](28ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:47:52,549 INFO 9198 [egg-sequelize](31ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:47:52,561 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:47:52,573 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:47:52,584 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:47:52,596 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:47:52,608 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,610 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:47:52,612 INFO 9198 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:47:52,619 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:47:52,620 INFO 9198 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,622 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,676 INFO 9198 [egg-sequelize](52ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:47:52,678 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:47:52,729 INFO 9198 [egg-sequelize](48ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:47:52,754 INFO 9198 [egg-sequelize](24ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:52,776 INFO 9198 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:47:52,789 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:47:52,806 INFO 9198 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:47:52,823 INFO 9198 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:47:52,836 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:47:52,849 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:47:52,861 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,873 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:47:52,874 INFO 9198 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:47:52,876 INFO 9198 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:52,878 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:47:52,879 INFO 9198 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,891 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:47:52,902 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:47:52,931 INFO 9198 [egg-sequelize](27ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:52,933 INFO 9198 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:47:52,936 INFO 9198 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:47:52,939 INFO 9198 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:47:52,939 INFO 9198 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:47:52,960 INFO 9198 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:47:52,973 INFO 9198 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:47:52,985 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:47:52,997 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:47:53,009 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:47:53,021 INFO 9198 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:47:53,032 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:47:53,044 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:47:53,056 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:47:53,068 INFO 9198 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:47:53,070 INFO 9198 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:48:08,307 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:48:08,309 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:08,313 INFO 9875 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:48:08,314 INFO 9875 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,327 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:48:08,339 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:48:08,352 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:48:08,364 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:48:08,376 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:48:08,388 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:48:08,400 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:08,403 INFO 9875 [egg-sequelize](2ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:48:08,408 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:08,410 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:48:08,410 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,425 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:48:08,437 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:48:08,438 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:48:08,441 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:08,443 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:48:08,443 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,463 INFO 9875 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:48:08,474 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:48:08,486 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:48:08,497 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:48:08,510 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:08,512 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:48:08,514 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:08,516 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:48:08,517 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,536 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:48:08,549 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:08,552 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:48:08,554 INFO 9875 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:08,562 INFO 9875 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:48:08,563 INFO 9875 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,592 INFO 9875 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:48:08,604 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:48:08,618 INFO 9875 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:48:08,632 INFO 9875 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:48:08,644 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:48:08,656 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:48:08,668 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:48:08,682 INFO 9875 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:48:08,693 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:48:08,705 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:48:08,717 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:48:08,729 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:48:08,740 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:48:08,752 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:48:08,763 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:48:08,775 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:48:08,777 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:08,789 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:48:08,809 INFO 9875 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:48:08,825 INFO 9875 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:08,826 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:48:08,828 INFO 9875 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:48:08,830 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:48:08,830 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,844 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:48:08,845 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:08,857 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:48:08,875 INFO 9875 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:08,887 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:48:08,898 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:48:08,911 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:08,912 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:48:08,914 INFO 9875 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:08,916 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:48:08,917 INFO 9875 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:08,918 INFO 9875 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_31' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:08,934 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_31`;
2020-06-10 11:48:08,936 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_32' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:08,951 INFO 9875 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_32`;
2020-06-10 11:48:08,970 INFO 9875 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:08,989 INFO 9875 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:08,992 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_33' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:09,005 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_33`;
2020-06-10 11:48:09,025 INFO 9875 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:09,040 INFO 9875 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:48:09,052 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:48:09,064 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:09,065 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:48:09,068 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:09,070 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:48:09,070 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:09,084 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:48:09,096 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:48:09,108 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:09,109 INFO 9875 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:09,124 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:48:09,141 INFO 9875 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:48:09,143 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:48:09,145 INFO 9875 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:09,147 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:48:09,148 INFO 9875 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:09,149 INFO 9875 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:09,162 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:48:09,164 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:09,176 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:48:09,195 INFO 9875 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:48:09,216 INFO 9875 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:48:09,229 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:48:09,241 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:48:09,253 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:48:09,265 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:48:09,277 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:48:09,289 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:48:09,301 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:48:09,313 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:09,315 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:48:09,317 INFO 9875 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:09,323 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:48:09,323 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:09,325 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:09,343 INFO 9875 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:48:09,345 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:09,357 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:48:09,375 INFO 9875 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:09,395 INFO 9875 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:09,407 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:48:09,419 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:48:09,432 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:48:09,444 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:48:09,456 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:48:09,467 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:09,479 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:48:09,480 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:48:09,482 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:09,484 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:48:09,484 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:09,496 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:48:09,508 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:48:09,519 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:09,521 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:48:09,524 INFO 9875 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:09,526 INFO 9875 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:48:09,526 INFO 9875 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:09,539 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:48:09,550 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:48:09,562 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:48:09,574 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:48:09,586 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:48:09,597 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:48:09,609 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:48:09,620 INFO 9875 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:48:09,633 INFO 9875 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:48:09,645 INFO 9875 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:09,646 INFO 9875 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:48:19,533 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:48:19,535 INFO 10259 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:19,539 INFO 10259 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-10 11:48:19,540 INFO 10259 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:19,554 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-10 11:48:19,568 INFO 10259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-10 11:48:19,580 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-10 11:48:19,592 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-10 11:48:19,603 INFO 10259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-10 11:48:19,615 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-10 11:48:19,626 INFO 10259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:19,629 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-10 11:48:19,635 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:19,637 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-10 11:48:19,638 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:19,651 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-10 11:48:19,663 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-10 11:48:19,665 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-10 11:48:19,667 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:19,669 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-10 11:48:19,670 INFO 10259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:19,683 INFO 10259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-10 11:48:19,695 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-10 11:48:19,707 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-10 11:48:19,720 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-10 11:48:19,732 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:19,733 INFO 10259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-10 11:48:19,735 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:19,737 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-10 11:48:19,737 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:19,750 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-10 11:48:19,762 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:19,764 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-10 11:48:19,766 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:19,769 INFO 10259 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-10 11:48:19,770 INFO 10259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:19,784 INFO 10259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-10 11:48:19,796 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-10 11:48:19,809 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-10 11:48:19,821 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-10 11:48:19,833 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-10 11:48:19,845 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-10 11:48:19,858 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-10 11:48:19,870 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-10 11:48:19,882 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-10 11:48:19,894 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-10 11:48:19,907 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-10 11:48:19,919 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-10 11:48:19,931 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-10 11:48:19,943 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-10 11:48:19,955 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-10 11:48:19,967 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-10 11:48:19,969 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:19,982 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-10 11:48:20,006 INFO 10259 [egg-sequelize](22ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:48:20,022 INFO 10259 [egg-sequelize](15ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,024 INFO 10259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-10 11:48:20,027 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-10 11:48:20,030 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-10 11:48:20,030 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,043 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-10 11:48:20,045 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,057 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-10 11:48:20,074 INFO 10259 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:20,086 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:48:20,098 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-10 11:48:20,109 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,111 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-10 11:48:20,114 INFO 10259 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:20,116 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-10 11:48:20,117 INFO 10259 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,119 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_34' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,132 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_34`;
2020-06-10 11:48:20,134 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_35' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,146 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_35`;
2020-06-10 11:48:20,166 INFO 10259 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:20,189 INFO 10259 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:20,190 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_36' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,204 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_36`;
2020-06-10 11:48:20,226 INFO 10259 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:20,242 INFO 10259 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:48:20,254 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-10 11:48:20,266 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,267 INFO 10259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-10 11:48:20,269 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `content` TEXT NOT NULL COMMENT '权限内容', `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:20,271 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-10 11:48:20,271 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,284 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `content` `content` TEXT NOT NULL COMMENT '权限内容';
2020-06-10 11:48:20,296 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `type` `type` INTEGER COMMENT '1:路由, 2:接口, 3:其他';
2020-06-10 11:48:20,308 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,312 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,324 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-10 11:48:20,341 INFO 10259 [egg-sequelize](16ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-10 11:48:20,342 INFO 10259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-10 11:48:20,345 INFO 10259 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:20,348 INFO 10259 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-10 11:48:20,349 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,350 INFO 10259 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,365 INFO 10259 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-10 11:48:20,367 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,379 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-10 11:48:20,399 INFO 10259 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:48:20,418 INFO 10259 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-10 11:48:20,431 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-10 11:48:20,443 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-10 11:48:20,455 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-10 11:48:20,467 INFO 10259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-10 11:48:20,478 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-10 11:48:20,491 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-10 11:48:20,503 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-10 11:48:20,515 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,517 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-10 11:48:20,518 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-10 11:48:20,521 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-10 11:48:20,521 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,523 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,535 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-10 11:48:20,537 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-10 11:48:20,549 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-10 11:48:20,568 INFO 10259 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:20,587 INFO 10259 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-10 11:48:20,599 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-10 11:48:20,611 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-10 11:48:20,625 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-10 11:48:20,636 INFO 10259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-10 11:48:20,648 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-10 11:48:20,660 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,672 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-10 11:48:20,673 INFO 10259 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-10 11:48:20,675 INFO 10259 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:20,677 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-10 11:48:20,677 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,691 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-10 11:48:20,703 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-10 11:48:20,714 INFO 10259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,716 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-10 11:48:20,718 INFO 10259 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-10 11:48:20,720 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-10 11:48:20,720 INFO 10259 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-10 11:48:20,732 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-10 11:48:20,743 INFO 10259 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-10 11:48:20,755 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-10 11:48:20,767 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-10 11:48:20,779 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-10 11:48:20,792 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-10 11:48:20,804 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-10 11:48:20,816 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-10 11:48:20,828 INFO 10259 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-10 11:48:20,840 INFO 10259 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-10 11:48:20,842 INFO 10259 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-10 11:48:33,176 INFO 10644 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:48:34,525 INFO 10644 [egg-sequelize](2ms) Executed (default): SELECT `p_reservation`.`id`, `p_reservation`.`type_name`, `p_reservation`.`method`, `p_reservation`.`start_time`, `p_reservation`.`end_time`, `p_reservation`.`state`, `from`.`id` AS `from.id`, `from`.`name` AS `from.name`, `to`.`id` AS `to.id`, `to`.`name` AS `to.name` FROM `p_reservation` AS `p_reservation` LEFT OUTER JOIN `p_user` AS `from` ON `p_reservation`.`from_id` = `from`.`id` LEFT OUTER JOIN `p_user` AS `to` ON `p_reservation`.`to_id` = `to`.`id` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`status` = 1;
2020-06-10 11:49:01,148 INFO 10676 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 11:49:08,857 INFO 10676 [egg-sequelize](2ms) Executed (default): SELECT `p_reservation`.`id`, `p_reservation`.`type_name`, `p_reservation`.`method`, `p_reservation`.`start_time`, `p_reservation`.`end_time`, `p_reservation`.`state`, `from`.`id` AS `from.id`, `from`.`account` AS `from.account`, `from`.`name` AS `from.name`, `to`.`id` AS `to.id`, `to`.`account` AS `to.account`, `to`.`name` AS `to.name` FROM `p_reservation` AS `p_reservation` LEFT OUTER JOIN `p_user` AS `from` ON `p_reservation`.`from_id` = `from`.`id` LEFT OUTER JOIN `p_user` AS `to` ON `p_reservation`.`to_id` = `to`.`id` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`status` = 1;
2020-06-10 11:49:35,599 INFO 10707 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:26:30,121 INFO 12643 [egg-sequelize](4ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:26:37,044 INFO 12673 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:29:21,637 INFO 12711 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:29:59,719 INFO 12740 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:30:08,026 INFO 12765 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:31:01,453 INFO 12789 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:31:15,201 INFO 12817 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:32:04,497 INFO 12849 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:32:37,218 INFO 12877 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:33:06,049 INFO 12902 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:33:32,017 INFO 12928 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:33:46,150 INFO 12952 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:34:27,466 INFO 12980 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:34:44,315 INFO 13005 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:35:57,953 INFO 13032 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:36:52,612 INFO 13060 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:38:15,255 INFO 13094 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:39:30,105 INFO 13125 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:39:32,083 INFO 13136 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:39:52,088 INFO 13151 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:40:18,814 INFO 13175 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:40:38,855 INFO 13203 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:41:41,525 INFO 13238 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:42:15,998 INFO 13276 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:42:28,079 INFO 13297 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:42:35,949 INFO 13321 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:42:57,620 INFO 13337 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:43:04,610 INFO 13361 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:43:36,901 INFO 13383 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:43:39,031 INFO 13394 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:44:35,665 INFO 13415 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:45:14,933 INFO 13439 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:45:28,075 INFO 13460 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:46:15,845 INFO 13488 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:46:24,512 INFO 13509 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:46:41,844 INFO 13533 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:47:29,115 INFO 13557 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:47:42,088 INFO 13581 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:48:48,590 INFO 13609 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:48:54,942 INFO 13628 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:50:12,793 INFO 13654 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:50:53,403 INFO 13682 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:51:02,174 INFO 13703 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:51:44,355 INFO 13738 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:51:52,729 INFO 13759 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:53:24,580 INFO 13801 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:53:27,600 ERROR 13801 [-/::1/-/14ms PUT /api/reservation/modify] nodejs.TypeError: ctx.helper.checkData is not a constructor
    at ReservationController.modify (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:118:26)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 13801
hostname: yudeMacBook-Pro.local

2020-06-10 15:54:16,944 INFO 13875 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:54:40,769 INFO 13904 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:55:00,292 ERROR 13904 [-/::1/-/20ms PUT /api/reservation/modify] nodejs.TypeError: ctx.helper.checkData is not a constructor
    at ReservationController.modify (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:118:26)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 13904
hostname: yudeMacBook-Pro.local

2020-06-10 15:56:11,786 INFO 13964 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:56:14,895 ERROR 13964 [-/::1/-/16ms PUT /api/reservation/modify] nodejs.TypeError: ctx.helper.checkData is not a constructor
    at ReservationController.modify (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:118:26)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 13964
hostname: yudeMacBook-Pro.local

2020-06-10 15:59:20,051 INFO 14016 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 15:59:56,228 INFO 14046 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:01:35,618 INFO 14081 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:02:11,798 INFO 14108 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:02:28,085 INFO 14108 [egg-sequelize](23ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:02:54,724 INFO 14132 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:03:23,747 INFO 14156 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:03:35,268 INFO 14156 [egg-sequelize](5ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:03:58,863 INFO 14180 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:11:50,670 INFO 14253 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:13:49,276 INFO 14253 [egg-sequelize](5ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 16:13:49,286 INFO 14253 [egg-sequelize](3ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:14:08,985 INFO 14291 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:14:17,178 INFO 14314 [egg-sequelize](3ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:17:43,417 INFO 14365 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:17:44,220 INFO 14365 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 16:17:44,235 INFO 14365 [egg-sequelize](5ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=?,`end_time`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:18:20,564 INFO 14391 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:18:21,394 INFO 14391 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 16:18:21,405 INFO 14391 [egg-sequelize](5ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=?,`end_time`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:19:07,185 INFO 14391 [egg-sequelize](1ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 16:19:07,203 INFO 14391 [egg-sequelize](6ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=?,`end_time`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:19:34,970 INFO 14425 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:22:37,052 INFO 14425 [egg-sequelize](2ms) Executed (default): SELECT `id`, `from_id`, `to_id`, `type_name`, `method`, `date_time`, `start_time`, `end_time`, `status`, `state` FROM `p_reservation` AS `p_reservation` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`state` = 1;
2020-06-10 16:22:37,064 INFO 14425 [egg-sequelize](3ms) Executed (default): UPDATE `p_reservation` SET `from_id`=?,`to_id`=?,`start_time`=?,`method`=?,`type_name`=?,`end_time`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:22:56,947 INFO 14465 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:30:16,783 INFO 14562 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:31:02,255 INFO 14590 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:31:40,918 INFO 14618 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:31:44,582 INFO 14629 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:31:55,690 INFO 14650 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:32:15,075 INFO 14678 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:32:24,446 INFO 14699 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:32:35,279 INFO 14723 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:33:27,419 INFO 14752 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:34:23,381 INFO 14786 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:34:57,360 INFO 14818 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:35:08,534 INFO 14848 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-10 16:35:11,087 INFO 14848 [egg-sequelize](6ms) Executed (default): UPDATE `p_reservation` SET `status`=? WHERE `id` = ? AND `status` = ?
2020-06-10 16:36:02,376 INFO 14876 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 17:32:26,946 INFO 15493 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 17:32:50,874 INFO 15522 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 17:33:08,123 INFO 15564 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 17:33:27,098 INFO 15585 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:04:04,292 INFO 16233 [egg-sequelize](3ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:04:28,690 INFO 16233 [egg-sequelize](18ms) Executed (default): SELECT `p_user`.`id`, `p_user`.`account`, `p_user`.`name`, `p_user`.`gender`, `roles`.`id` AS `roles.id`, `roles`.`name` AS `roles.name` FROM `p_user` AS `p_user` LEFT OUTER JOIN `p_role` AS `roles` ON `p_user`.`role_id` = `roles`.`id` WHERE `p_user`.`status` = 1 LIMIT 3;
2020-06-10 18:04:28,690 INFO 16233 [egg-sequelize](19ms) Executed (default): SELECT count(`p_user`.`id`) AS `count` FROM `p_user` AS `p_user` LEFT OUTER JOIN `p_role` AS `roles` ON `p_user`.`role_id` = `roles`.`id` WHERE `p_user`.`status` = 1;
2020-06-10 18:08:05,947 INFO 16315 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:08:10,478 INFO 16326 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:08:27,348 INFO 16352 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:08:42,959 ERROR 16352 [-/::1/-/22ms GET /api/reservation/getList?to_id=2] nodejs.TypeError: ctx.helper.checkData is not a constructor
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:82:26)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 16352
hostname: yudeMacBook-Pro.local

2020-06-10 18:09:24,553 ERROR 16352 [-/::1/-/1ms GET /api/reservation/getList?to_id=2] nodejs.TypeError: ctx.helper.checkData is not a constructor
    at ReservationController.getList (/Users/yuakira/dev/projects/Psychology2/app/controller/reservation.js:82:26)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 16352
hostname: yudeMacBook-Pro.local

2020-06-10 18:09:24,653 INFO 16380 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:10:04,349 INFO 16416 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:10:07,451 INFO 16416 [egg-sequelize](9ms) Executed (default): SELECT `p_reservation`.`id`, `p_reservation`.`type_name`, `p_reservation`.`method`, `p_reservation`.`start_time`, `p_reservation`.`end_time`, `p_reservation`.`state`, `from`.`id` AS `from.id`, `from`.`account` AS `from.account`, `from`.`name` AS `from.name`, `to`.`id` AS `to.id`, `to`.`account` AS `to.account`, `to`.`name` AS `to.name` FROM `p_reservation` AS `p_reservation` LEFT OUTER JOIN `p_user` AS `from` ON `p_reservation`.`from_id` = `from`.`id` LEFT OUTER JOIN `p_user` AS `to` ON `p_reservation`.`to_id` = `to`.`id` WHERE `p_reservation`.`to_id` = '2' AND `p_reservation`.`status` = 1 AND `p_reservation`.`start_time` > 1589105407428;
2020-06-10 18:10:52,742 INFO 16444 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:12:19,312 INFO 16478 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-10 18:12:29,117 INFO 16502 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:20:26,392 INFO 30676 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:21:07,408 INFO 30676 [egg-sequelize](15ms) Executed (default): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 09:21:23,690 WARN 30676 [-/::1/-/2ms POST /api/role/add] nodejs.SyntaxError: Unexpected token 心 in JSON at position 11, check bodyParser config
    at JSON.parse (<anonymous>)
    at parse (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:57:17)
    at AsyncFunction.module.exports [as json] (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:41:20)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async parseBody (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:100:14)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:85:19)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)
status: 400
body: "{\n\t\"name1:\"心理咨询师\"\n}"
pid: 30676
hostname: yudeMacBook-Pro.local

2020-06-11 09:22:45,980 INFO 30724 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:22:50,160 INFO 30739 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:22:54,781 INFO 30751 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:23:23,346 INFO 30778 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:24:42,812 INFO 30808 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:24:55,960 INFO 30832 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:25:15,844 INFO 30861 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:26:25,756 INFO 30892 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:26:26,151 INFO 30892 [egg-sequelize](4ms) Executed (default): SELECT `id`, `type_name`, `description` FROM `p_reservation_type` AS `p_reservation_type` WHERE `p_reservation_type`.`status` = 1;
2020-06-11 09:26:50,237 INFO 30920 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:27:16,664 INFO 30954 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:27:17,471 ERROR 30954 [-/::1/-/26ms GET /api/role/get] nodejs.TypeError: service.role.getList is not a function
    at RoleController.get (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:58:35)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 30954
hostname: yudeMacBook-Pro.local

2020-06-11 09:27:28,083 INFO 30975 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:27:32,461 INFO 30975 [egg-sequelize](4ms) Executed (default): SELECT `id`, `name` FROM `p_role` AS `p_role` WHERE `p_role`.`status` = 1;
2020-06-11 09:29:04,997 INFO 31033 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:29:21,454 INFO 31057 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:30:07,934 INFO 31085 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:30:36,928 INFO 31085 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_permissions`.`id` AS `p_permissions.id`, `p_permissions`.`content` AS `p_permissions.content`, `p_permissions`.`type` AS `p_permissions.type`, `p_permissions`.`status` AS `p_permissions.status`, `p_permissions`.`role_id` AS `p_permissions.role_id` FROM `p_role` AS `p_role` INNER JOIN `p_permission` AS `p_permissions` ON `p_role`.`id` = `p_permissions`.`role_id` AND `p_permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 09:31:05,544 INFO 31115 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:31:06,308 INFO 31115 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_permissions`.`id` AS `p_permissions.id`, `p_permissions`.`content` AS `p_permissions.content`, `p_permissions`.`type` AS `p_permissions.type`, `p_permissions`.`status` AS `p_permissions.status`, `p_permissions`.`role_id` AS `p_permissions.role_id` FROM `p_role` AS `p_role` INNER JOIN `p_permission` AS `p_permissions` ON `p_role`.`id` = `p_permissions`.`role_id` AND `p_permissions`.`status` = 1 AND `p_permissions`.`requred` = false WHERE `p_role`.`status` = 1;
2020-06-11 09:31:41,707 INFO 31115 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_permissions`.`id` AS `p_permissions.id`, `p_permissions`.`content` AS `p_permissions.content`, `p_permissions`.`type` AS `p_permissions.type`, `p_permissions`.`status` AS `p_permissions.status`, `p_permissions`.`role_id` AS `p_permissions.role_id` FROM `p_role` AS `p_role` INNER JOIN `p_permission` AS `p_permissions` ON `p_role`.`id` = `p_permissions`.`role_id` AND `p_permissions`.`status` = 1 AND `p_permissions`.`requred` = false WHERE `p_role`.`status` = 1;
2020-06-11 09:31:41,676 INFO 31139 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:31:44,868 INFO 31139 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_permissions`.`id` AS `p_permissions.id`, `p_permissions`.`content` AS `p_permissions.content`, `p_permissions`.`type` AS `p_permissions.type`, `p_permissions`.`status` AS `p_permissions.status`, `p_permissions`.`role_id` AS `p_permissions.role_id` FROM `p_role` AS `p_role` INNER JOIN `p_permission` AS `p_permissions` ON `p_role`.`id` = `p_permissions`.`role_id` AND `p_permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 09:31:59,010 INFO 31160 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:31:59,892 INFO 31160 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_permissions`.`id` AS `p_permissions.id`, `p_permissions`.`content` AS `p_permissions.content`, `p_permissions`.`type` AS `p_permissions.type`, `p_permissions`.`status` AS `p_permissions.status`, `p_permissions`.`role_id` AS `p_permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `p_permissions` ON `p_role`.`id` = `p_permissions`.`role_id` AND `p_permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 09:32:33,525 INFO 31185 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:33:20,625 INFO 31221 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:33:21,135 INFO 31221 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`content` AS `permissions.content`, `permissions`.`type` AS `permissions.type`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 09:34:20,658 INFO 31251 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:39:52,817 INFO 31315 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:40:12,251 INFO 31315 [egg-sequelize](7ms) Executed (default): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 09:40:47,812 INFO 31342 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:40:58,374 INFO 31342 [egg-sequelize](3ms) Executed (default): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 09:50:02,229 INFO 31453 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:50:14,268 INFO 31477 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:52:38,106 INFO 31534 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:56:12,475 INFO 31588 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:56:27,125 INFO 31613 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:56:46,125 INFO 31613 [egg-sequelize](0ms) Executed (be22faf1-2a9e-4bb5-9473-0d8dcd050f72): START TRANSACTION;
2020-06-11 09:56:46,134 INFO 31613 [egg-sequelize](2ms) Executed (be22faf1-2a9e-4bb5-9473-0d8dcd050f72): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 09:56:46,146 INFO 31613 [egg-sequelize](5ms) Executed (be22faf1-2a9e-4bb5-9473-0d8dcd050f72): COMMIT;
2020-06-11 09:57:16,555 INFO 31643 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:57:55,786 INFO 31684 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 09:58:08,198 INFO 31684 [egg-sequelize](1ms) Executed (58e42dac-8379-4f9c-ac67-f2f8dd5c4f6d): START TRANSACTION;
2020-06-11 09:58:08,207 INFO 31684 [egg-sequelize](2ms) Executed (58e42dac-8379-4f9c-ac67-f2f8dd5c4f6d): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 09:58:08,219 INFO 31684 [egg-sequelize](6ms) Executed (58e42dac-8379-4f9c-ac67-f2f8dd5c4f6d): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN ('[object Object]')
2020-06-11 09:58:08,221 INFO 31684 [egg-sequelize](1ms) Executed (58e42dac-8379-4f9c-ac67-f2f8dd5c4f6d): COMMIT;
2020-06-11 10:04:16,849 INFO 31802 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:04:19,089 INFO 31802 [egg-sequelize](0ms) Executed (bd93aab8-063e-4c66-b024-6db6d2383e3a): START TRANSACTION;
2020-06-11 10:04:19,105 INFO 31802 [egg-sequelize](6ms) Executed (default): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:04:19,109 INFO 31802 [egg-sequelize](1ms) Executed (bd93aab8-063e-4c66-b024-6db6d2383e3a): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:04:19,118 INFO 31802 [egg-sequelize](3ms) Executed (bd93aab8-063e-4c66-b024-6db6d2383e3a): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (1)
2020-06-11 10:04:19,145 INFO 31802 [egg-sequelize](26ms) Executed (bd93aab8-063e-4c66-b024-6db6d2383e3a): COMMIT;
2020-06-11 10:07:00,984 INFO 31848 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:07:02,256 INFO 31848 [egg-sequelize](1ms) Executed (f5cbab01-93f4-4e24-a178-fe1372bb55f8): START TRANSACTION;
2020-06-11 10:07:02,268 INFO 31848 [egg-sequelize](2ms) Executed (default): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:07:02,274 INFO 31848 [egg-sequelize](1ms) Executed (f5cbab01-93f4-4e24-a178-fe1372bb55f8): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:07:02,285 INFO 31848 [egg-sequelize](1ms) Executed (f5cbab01-93f4-4e24-a178-fe1372bb55f8): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (2)
2020-06-11 10:07:26,928 INFO 31877 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:08:04,484 INFO 31902 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:08:13,395 INFO 31926 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:08:16,787 INFO 31937 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:09:02,113 INFO 31951 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:09:10,526 INFO 31975 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:09:32,024 INFO 31997 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:09:57,845 INFO 32022 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:11:56,970 INFO 32059 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:12:53,528 INFO 32090 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:13:00,517 INFO 32113 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:13:02,658 INFO 32113 [egg-sequelize](0ms) Executed (09b1cf05-fcfe-49e5-90cf-68fc295827cf): START TRANSACTION;
2020-06-11 10:13:02,671 INFO 32113 [egg-sequelize](4ms) Executed (09b1cf05-fcfe-49e5-90cf-68fc295827cf): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:13:02,674 INFO 32113 [egg-sequelize](1ms) Executed (09b1cf05-fcfe-49e5-90cf-68fc295827cf): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:13:02,684 INFO 32113 [egg-sequelize](0ms) Executed (09b1cf05-fcfe-49e5-90cf-68fc295827cf): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (3)
2020-06-11 10:13:02,686 INFO 32113 [egg-sequelize](0ms) Executed (09b1cf05-fcfe-49e5-90cf-68fc295827cf): COMMIT;
2020-06-11 10:13:02,689 ERROR 32113 [-/::1/-/53ms POST /api/role/add] nodejs.ReferenceError: transaction is not defined
    at RoleService.add (/Users/yuakira/dev/projects/Psychology2/app/service/role.js:38:7)
    at async RoleController.add (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:27:18)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 32113
hostname: yudeMacBook-Pro.local

2020-06-11 10:13:11,573 INFO 32127 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:13:14,860 INFO 32127 [egg-sequelize](0ms) Executed (61a4c198-42ce-4534-923a-82dbace9b8f0): START TRANSACTION;
2020-06-11 10:13:14,870 INFO 32127 [egg-sequelize](3ms) Executed (61a4c198-42ce-4534-923a-82dbace9b8f0): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:13:14,874 INFO 32127 [egg-sequelize](1ms) Executed (61a4c198-42ce-4534-923a-82dbace9b8f0): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:13:14,886 INFO 32127 [egg-sequelize](3ms) Executed (61a4c198-42ce-4534-923a-82dbace9b8f0): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (4)
2020-06-11 10:13:14,888 INFO 32127 [egg-sequelize](1ms) Executed (61a4c198-42ce-4534-923a-82dbace9b8f0): COMMIT;
2020-06-11 10:13:14,891 ERROR 32127 [-/::1/-/52ms POST /api/role/add] nodejs.ReferenceError: transaction is not defined
    at RoleService.add (/Users/yuakira/dev/projects/Psychology2/app/service/role.js:38:7)
    at async RoleController.add (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:27:18)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 32127
hostname: yudeMacBook-Pro.local

2020-06-11 10:13:52,605 INFO 32142 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:13:57,872 INFO 32142 [egg-sequelize](1ms) Executed (24bcd6a2-e731-42d9-afb5-bb78d9426e53): START TRANSACTION;
2020-06-11 10:13:57,880 INFO 32142 [egg-sequelize](2ms) Executed (24bcd6a2-e731-42d9-afb5-bb78d9426e53): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:13:57,884 INFO 32142 [egg-sequelize](1ms) Executed (24bcd6a2-e731-42d9-afb5-bb78d9426e53): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:13:57,894 INFO 32142 [egg-sequelize](1ms) Executed (24bcd6a2-e731-42d9-afb5-bb78d9426e53): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (5)
2020-06-11 10:13:57,900 INFO 32142 [egg-sequelize](1ms) Executed (24bcd6a2-e731-42d9-afb5-bb78d9426e53): COMMIT;
2020-06-11 10:13:57,909 ERROR 32142 [-/::1/-/59ms POST /api/role/add] nodejs.Error: Transaction cannot be rolled back because it has been finished with state: commit
    at Transaction.rollback (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/transaction.js:86:29)
    at RoleService.add (/Users/yuakira/dev/projects/Psychology2/app/service/role.js:38:25)
    at async RoleController.add (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:27:18)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 32142
hostname: yudeMacBook-Pro.local

2020-06-11 10:16:38,340 INFO 32182 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:16:38,411 INFO 32182 [egg-sequelize](0ms) Executed (9080adc4-a28d-457c-81a7-81c978a896bb): START TRANSACTION;
2020-06-11 10:16:38,420 INFO 32182 [egg-sequelize](3ms) Executed (9080adc4-a28d-457c-81a7-81c978a896bb): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:16:38,423 INFO 32182 [egg-sequelize](1ms) Executed (9080adc4-a28d-457c-81a7-81c978a896bb): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:16:38,429 INFO 32182 [egg-sequelize](1ms) Executed (9080adc4-a28d-457c-81a7-81c978a896bb): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (6)
2020-06-11 10:16:38,435 INFO 32182 [egg-sequelize](1ms) Executed (9080adc4-a28d-457c-81a7-81c978a896bb): COMMIT;
2020-06-11 10:16:38,440 ERROR 32182 [-/::1/-/48ms POST /api/role/add] nodejs.Error: Transaction cannot be rolled back because it has been finished with state: commit
    at Transaction.rollback (/Users/yuakira/dev/projects/Psychology2/node_modules/_sequelize@5.21.10@sequelize/lib/transaction.js:86:29)
    at RoleService.add (/Users/yuakira/dev/projects/Psychology2/app/service/role.js:40:25)
    at async RoleController.add (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:27:18)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 32182
hostname: yudeMacBook-Pro.local

2020-06-11 10:17:03,425 INFO 32203 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 10:17:07,102 INFO 32203 [egg-sequelize](5ms) Executed (be98a3ae-3eef-45a3-8678-55a1b070fd0f): START TRANSACTION;
2020-06-11 10:17:07,111 INFO 32203 [egg-sequelize](3ms) Executed (be98a3ae-3eef-45a3-8678-55a1b070fd0f): INSERT INTO `p_permission` (`id`,`content`,`type`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 10:17:07,114 INFO 32203 [egg-sequelize](0ms) Executed (be98a3ae-3eef-45a3-8678-55a1b070fd0f): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 10:17:07,122 INFO 32203 [egg-sequelize](1ms) Executed (be98a3ae-3eef-45a3-8678-55a1b070fd0f): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (7)
2020-06-11 10:17:07,124 INFO 32203 [egg-sequelize](1ms) Executed (be98a3ae-3eef-45a3-8678-55a1b070fd0f): COMMIT;
2020-06-11 10:34:23,308 INFO 32457 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:23:35,281 INFO 33344 [egg-sequelize](3ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:23:43,614 INFO 33366 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:40:30,579 INFO 33864 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:40:55,936 INFO 33888 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:41:20,288 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:41:20,306 INFO 33916 [egg-sequelize](19ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:41:20,316 INFO 33916 [egg-sequelize](6ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-11 11:41:20,317 INFO 33916 [egg-sequelize](7ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,334 INFO 33916 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-11 11:41:20,347 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-11 11:41:20,364 INFO 33916 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-11 11:41:20,379 INFO 33916 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-11 11:41:20,394 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-11 11:41:20,407 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-11 11:41:20,420 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:20,422 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-11 11:41:20,428 INFO 33916 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:41:20,431 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-11 11:41:20,431 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,446 INFO 33916 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-11 11:41:20,458 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-11 11:41:20,459 INFO 33916 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-11 11:41:20,462 INFO 33916 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:41:20,464 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-11 11:41:20,465 INFO 33916 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,478 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-11 11:41:20,490 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-11 11:41:20,501 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-11 11:41:20,513 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-11 11:41:20,524 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:20,526 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-11 11:41:20,530 INFO 33916 [egg-sequelize](3ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:41:20,531 INFO 33916 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-11 11:41:20,532 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,545 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-11 11:41:20,557 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:20,558 INFO 33916 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-11 11:41:20,562 INFO 33916 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:41:20,566 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-11 11:41:20,567 INFO 33916 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,581 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-11 11:41:20,592 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-11 11:41:20,605 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-11 11:41:20,616 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-11 11:41:20,629 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-11 11:41:20,640 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-11 11:41:20,653 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-11 11:41:20,665 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-11 11:41:20,677 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-11 11:41:20,689 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-11 11:41:20,701 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-11 11:41:20,712 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-11 11:41:20,725 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-11 11:41:20,738 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-11 11:41:20,750 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-11 11:41:20,762 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-11 11:41:20,766 INFO 33916 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:20,785 INFO 33916 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-11 11:41:20,815 INFO 33916 [egg-sequelize](29ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-11 11:41:20,827 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:20,829 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-11 11:41:20,833 INFO 33916 [egg-sequelize](2ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-11 11:41:20,835 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-11 11:41:20,836 INFO 33916 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,848 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-11 11:41:20,850 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:20,864 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-11 11:41:20,883 INFO 33916 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:41:20,896 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-11 11:41:20,908 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-11 11:41:20,920 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:20,921 INFO 33916 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-11 11:41:20,924 INFO 33916 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:41:20,926 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-11 11:41:20,927 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:20,928 INFO 33916 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_37' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:20,942 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_37`;
2020-06-11 11:41:20,943 INFO 33916 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_38' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:20,955 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_38`;
2020-06-11 11:41:20,974 INFO 33916 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:41:20,999 INFO 33916 [egg-sequelize](25ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:41:21,002 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_39' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:21,015 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_39`;
2020-06-11 11:41:21,035 INFO 33916 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:41:21,050 INFO 33916 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-11 11:41:21,062 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-11 11:41:21,074 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:21,075 INFO 33916 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-11 11:41:21,078 INFO 33916 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `apis` TEXT NOT NULL COMMENT '接口', `name` VARCHAR(50) COMMENT '1:路由, 2:接口, 3:其他', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:41:21,081 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-11 11:41:21,081 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:21,134 INFO 33916 [egg-sequelize](51ms) Executed (default): ALTER TABLE `p_permission` ADD `apis` TEXT NOT NULL COMMENT '接口';
2020-06-11 11:41:21,183 INFO 33916 [egg-sequelize](47ms) Executed (default): ALTER TABLE `p_permission` ADD `name` VARCHAR(50) COMMENT '1:路由, 2:接口, 3:其他';
2020-06-11 11:41:21,324 INFO 33916 [egg-sequelize](138ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'p_permission' AND REFERENCED_TABLE_SCHEMA = 'project_psychology' AND REFERENCED_COLUMN_NAME = 'content') OR (TABLE_NAME = 'p_permission' AND TABLE_SCHEMA = 'project_psychology' AND COLUMN_NAME = 'content' AND REFERENCED_TABLE_NAME IS NOT NULL)
2020-06-11 11:41:21,367 INFO 33916 [egg-sequelize](40ms) Executed (default): ALTER TABLE `p_permission` DROP `content`;
2020-06-11 11:41:21,403 INFO 33916 [egg-sequelize](34ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE WHERE (REFERENCED_TABLE_NAME = 'p_permission' AND REFERENCED_TABLE_SCHEMA = 'project_psychology' AND REFERENCED_COLUMN_NAME = 'type') OR (TABLE_NAME = 'p_permission' AND TABLE_SCHEMA = 'project_psychology' AND COLUMN_NAME = 'type' AND REFERENCED_TABLE_NAME IS NOT NULL)
2020-06-11 11:41:21,450 INFO 33916 [egg-sequelize](46ms) Executed (default): ALTER TABLE `p_permission` DROP `type`;
2020-06-11 11:41:21,463 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:21,465 INFO 33916 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:21,479 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-11 11:41:21,497 INFO 33916 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-11 11:41:21,500 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-11 11:41:21,502 INFO 33916 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:41:21,504 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-11 11:41:21,505 INFO 33916 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:21,507 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:21,520 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-11 11:41:21,521 INFO 33916 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:21,535 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-11 11:41:21,557 INFO 33916 [egg-sequelize](21ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-11 11:41:21,578 INFO 33916 [egg-sequelize](20ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-11 11:41:21,593 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-11 11:41:21,608 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-11 11:41:21,620 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-11 11:41:21,633 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-11 11:41:21,646 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-11 11:41:21,658 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-11 11:41:21,670 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-11 11:41:21,683 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:21,685 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-11 11:41:21,687 INFO 33916 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:41:21,691 INFO 33916 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-11 11:41:21,692 INFO 33916 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:21,694 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:21,708 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-11 11:41:21,709 INFO 33916 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:41:21,722 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-11 11:41:21,743 INFO 33916 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:41:21,766 INFO 33916 [egg-sequelize](22ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:41:21,780 INFO 33916 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-11 11:41:21,792 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-11 11:41:21,804 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-11 11:41:21,816 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-11 11:41:21,828 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-11 11:41:21,840 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:21,852 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-11 11:41:21,853 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-11 11:41:21,855 INFO 33916 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:41:21,856 INFO 33916 [egg-sequelize](0ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-11 11:41:21,857 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:21,869 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-11 11:41:21,881 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-11 11:41:21,892 INFO 33916 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:21,894 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-11 11:41:21,896 INFO 33916 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:41:21,899 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-11 11:41:21,900 INFO 33916 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:41:21,912 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-11 11:41:21,924 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-11 11:41:21,936 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-11 11:41:21,947 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-11 11:41:21,960 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-11 11:41:21,972 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-11 11:41:21,984 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-11 11:41:21,997 INFO 33916 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-11 11:41:22,009 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-11 11:41:22,021 INFO 33916 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:41:22,022 INFO 33916 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-11 11:41:32,881 INFO 34327 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:42:09,723 INFO 34380 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:42:18,974 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:42:18,976 INFO 34395 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_exercises` (`id` INTEGER auto_increment  COMMENT '站内信id', `title` VARCHAR(255) NOT NULL COMMENT '内容题目', `option_obj` TEXT NOT NULL COMMENT '答案选项json', `score_obj` TEXT NOT NULL COMMENT '答案分数json', `option_score_obj` TEXT NOT NULL COMMENT '选项和分数', `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题', `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:42:18,980 INFO 34395 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_exercises`;
2020-06-11 11:42:18,981 INFO 34395 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_exercises' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:18,996 INFO 34395 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '内容题目';
2020-06-11 11:42:19,009 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_obj` `option_obj` TEXT NOT NULL COMMENT '答案选项json';
2020-06-11 11:42:19,020 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `score_obj` `score_obj` TEXT NOT NULL COMMENT '答案分数json';
2020-06-11 11:42:19,032 INFO 34395 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `option_score_obj` `option_score_obj` TEXT NOT NULL COMMENT '选项和分数';
2020-06-11 11:42:19,044 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `mold_id` `mold_id` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '题目类型,1选择题';
2020-06-11 11:42:19,056 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '题目类型id，待定';
2020-06-11 11:42:19,068 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_exercises` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,075 INFO 34395 [egg-sequelize](6ms) Executed (default): SHOW INDEX FROM `p_exercises` FROM `project_psychology`
2020-06-11 11:42:19,078 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_justice` (`id` INTEGER auto_increment  COMMENT '地点id', `parent_id` INTEGER NOT NULL COMMENT '父级id', `name` VARCHAR(10) NOT NULL COMMENT '名称', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:42:19,080 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_justice`;
2020-06-11 11:42:19,081 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_justice' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,095 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `parent_id` `parent_id` INTEGER NOT NULL COMMENT '父级id';
2020-06-11 11:42:19,108 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_justice` CHANGE `name` `name` VARCHAR(10) NOT NULL COMMENT '名称';
2020-06-11 11:42:19,110 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_justice` FROM `project_psychology`
2020-06-11 11:42:19,112 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_msg` (`id` INTEGER auto_increment  COMMENT '站内信id', `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)', `to_id` INTEGER NOT NULL COMMENT '目标id', `content` TEXT NOT NULL COMMENT '内容', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:42:19,114 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_msg`;
2020-06-11 11:42:19,115 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_msg' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,129 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_msg` CHANGE `from_id` `from_id` INTEGER NOT NULL DEFAULT -1 COMMENT '来源id(-1为系统信息)';
2020-06-11 11:42:19,140 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `to_id` `to_id` INTEGER NOT NULL COMMENT '目标id';
2020-06-11 11:42:19,152 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `content` `content` TEXT NOT NULL COMMENT '内容';
2020-06-11 11:42:19,164 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_msg` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '0:未读， 1:已读';
2020-06-11 11:42:19,176 INFO 34395 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_msg` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,178 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_msg` FROM `project_psychology`
2020-06-11 11:42:19,180 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_role` (`id` INTEGER auto_increment  COMMENT '用户id', `name` VARCHAR(50) NOT NULL COMMENT '角色名', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:42:19,182 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_role`;
2020-06-11 11:42:19,182 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_role' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,194 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_role` CHANGE `name` `name` VARCHAR(50) NOT NULL COMMENT '角色名';
2020-06-11 11:42:19,207 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_role` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,208 INFO 34395 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_role` FROM `project_psychology`
2020-06-11 11:42:19,211 INFO 34395 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_user` (`id` INTEGER(11) auto_increment  COMMENT '用户id', `account` VARCHAR(50) COMMENT '用户账号', `phone` VARCHAR(11) COMMENT '用户电话', `password` VARCHAR(50) COMMENT '密码', `name` VARCHAR(10) COMMENT '用户姓名', `birthday` VARCHAR(13) COMMENT '生日', `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女', `avatar` VARCHAR(255) COMMENT '头像地址', `criminal_id` VARCHAR(50) COMMENT '服刑人员编码', `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填', `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类', `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否', `education` VARCHAR(255) COMMENT '学历', `job` VARCHAR(255) COMMENT '职业', `urgent_name` VARCHAR(255) COMMENT '紧急联系人', `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系', `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话', `role_id` INTEGER(11) COMMENT '角色id，管理者admin 咨询师doctor 中心工作人员worker 来访者visitor 服刑人员criminal', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:42:19,214 INFO 34395 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_user`;
2020-06-11 11:42:19,215 INFO 34395 [egg-sequelize](3ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,229 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `account` `account` VARCHAR(50) COMMENT '用户账号';
2020-06-11 11:42:19,242 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `phone` `phone` VARCHAR(11) COMMENT '用户电话';
2020-06-11 11:42:19,255 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `password` `password` VARCHAR(50) COMMENT '密码';
2020-06-11 11:42:19,267 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `name` `name` VARCHAR(10) COMMENT '用户姓名';
2020-06-11 11:42:19,279 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `birthday` `birthday` VARCHAR(13) COMMENT '生日';
2020-06-11 11:42:19,291 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `gender` `gender` INTEGER(1) DEFAULT 1 COMMENT '性别，1男2女';
2020-06-11 11:42:19,305 INFO 34395 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user` CHANGE `avatar` `avatar` VARCHAR(255) COMMENT '头像地址';
2020-06-11 11:42:19,318 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `criminal_id` `criminal_id` VARCHAR(50) COMMENT '服刑人员编码';
2020-06-11 11:42:19,330 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `justice_id` `justice_id` INTEGER(11) DEFAULT 0 COMMENT '司法所，服刑犯人才需要填';
2020-06-11 11:42:19,342 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `parent_id` `parent_id` INTEGER(11) DEFAULT 0 COMMENT '来访者才有父类';
2020-06-11 11:42:19,354 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `is_marry` `is_marry` INTEGER(11) DEFAULT 2 COMMENT '是否结婚,1是2否';
2020-06-11 11:42:19,366 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `education` `education` VARCHAR(255) COMMENT '学历';
2020-06-11 11:42:19,378 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `job` `job` VARCHAR(255) COMMENT '职业';
2020-06-11 11:42:19,391 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_name` `urgent_name` VARCHAR(255) COMMENT '紧急联系人';
2020-06-11 11:42:19,404 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_relation` `urgent_relation` VARCHAR(255) COMMENT '紧急联系人关系';
2020-06-11 11:42:19,416 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_user` CHANGE `urgent_phone` `urgent_phone` VARCHAR(255) COMMENT '紧急联系人电话';
2020-06-11 11:42:19,418 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_user' AND constraint_name = 'p_user_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,432 INFO 34395 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_user`
      DROP FOREIGN KEY `p_user_ibfk_1`;
2020-06-11 11:42:19,456 INFO 34395 [egg-sequelize](23ms) Executed (default): ALTER TABLE `p_user` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-11 11:42:19,472 INFO 34395 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_user` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,473 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_user` FROM `project_psychology`
2020-06-11 11:42:19,475 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper` (`id` INTEGER auto_increment  COMMENT '试卷id', `title` VARCHAR(255) NOT NULL COMMENT '试卷标题', `worker_id` INTEGER(11) NOT NULL COMMENT '创建人id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=innoDB;
2020-06-11 11:42:19,478 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper`;
2020-06-11 11:42:19,479 INFO 34395 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,492 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper` CHANGE `title` `title` VARCHAR(255) NOT NULL COMMENT '试卷标题';
2020-06-11 11:42:19,493 INFO 34395 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper' AND constraint_name = 'p_paper_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,506 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper`
      DROP FOREIGN KEY `p_paper_ibfk_1`;
2020-06-11 11:42:19,524 INFO 34395 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_paper` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:42:19,538 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-11 11:42:19,549 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `exercises_json` `exercises_json` TEXT NOT NULL COMMENT '所包含题目ID集合';
2020-06-11 11:42:19,561 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,562 INFO 34395 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_paper` FROM `project_psychology`
2020-06-11 11:42:19,564 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_paper_user` (`id` INTEGER(11) auto_increment  COMMENT '分配记录id', `user_id` INTEGER(11) NOT NULL COMMENT '用户id', `distributor_id` INTEGER(11) NOT NULL COMMENT '派发人id', `paper_id` INTEGER NOT NULL COMMENT '试卷id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:42:19,567 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_paper_user`;
2020-06-11 11:42:19,567 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_paper_user' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,569 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_40' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,582 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_40`;
2020-06-11 11:42:19,583 INFO 34395 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_41' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,595 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_41`;
2020-06-11 11:42:19,615 INFO 34395 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`user_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:42:19,634 INFO 34395 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`distributor_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:42:19,637 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_paper_user' AND constraint_name = 'p_paper_user_ibfk_42' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,650 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user`
      DROP FOREIGN KEY `p_paper_user_ibfk_42`;
2020-06-11 11:42:19,670 INFO 34395 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_paper_user` ADD FOREIGN KEY (`paper_id`) REFERENCES `p_paper` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:42:19,685 INFO 34395 [egg-sequelize](14ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-11 11:42:19,697 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 0 COMMENT '1:完成 0:未完成';
2020-06-11 11:42:19,710 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_paper_user` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,712 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_paper_user` FROM `project_psychology`
2020-06-11 11:42:19,714 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_permission` (`id` INTEGER auto_increment  COMMENT '用户id', `apis` TEXT NOT NULL COMMENT '接口', `name` VARCHAR(50) COMMENT '权限标识符', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', `role_id` INTEGER, PRIMARY KEY (`id`), FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:42:19,716 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_permission`;
2020-06-11 11:42:19,717 INFO 34395 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_permission' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,731 INFO 34395 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_permission` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,732 INFO 34395 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_permission' AND constraint_name = 'p_permission_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,753 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_permission`
      DROP FOREIGN KEY `p_permission_ibfk_1`;
2020-06-11 11:42:19,771 INFO 34395 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_permission` ADD FOREIGN KEY (`role_id`) REFERENCES `p_role` (`id`) ON DELETE SET NULL ON UPDATE CASCADE;
2020-06-11 11:42:19,783 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `apis` `apis` TEXT NOT NULL COMMENT '接口';
2020-06-11 11:42:19,795 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_permission` CHANGE `name` `name` VARCHAR(50) COMMENT '权限标识符';
2020-06-11 11:42:19,796 INFO 34395 [egg-sequelize](0ms) Executed (default): SHOW INDEX FROM `p_permission` FROM `project_psychology`
2020-06-11 11:42:19,798 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_record` (`id` INTEGER auto_increment  COMMENT '记录id', `operator_id` INTEGER NOT NULL COMMENT '留下记录的用户id', `worker_id` INTEGER NOT NULL COMMENT '负责工作人员id', `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳', `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈', `content` TEXT COMMENT '面谈内容', `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel', `title` VARCHAR(255) COMMENT '面谈标题或问卷标题', `paper_evaluation` TEXT COMMENT '答卷评价', `paper_exercises` TEXT COMMENT '用户的答卷答案', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:42:19,801 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_record`;
2020-06-11 11:42:19,802 INFO 34395 [egg-sequelize](2ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_record' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,803 INFO 34395 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,824 INFO 34395 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_1`;
2020-06-11 11:42:19,825 INFO 34395 [egg-sequelize](0ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_record' AND constraint_name = 'p_record_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,838 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record`
      DROP FOREIGN KEY `p_record_ibfk_2`;
2020-06-11 11:42:19,856 INFO 34395 [egg-sequelize](17ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`operator_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-11 11:42:19,875 INFO 34395 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_record` ADD FOREIGN KEY (`worker_id`) REFERENCES `p_user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
2020-06-11 11:42:19,888 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_record` CHANGE `time_stamp` `time_stamp` VARCHAR(13) NOT NULL COMMENT '生成时间戳';
2020-06-11 11:42:19,900 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `type_id` `type_id` INTEGER(11) NOT NULL COMMENT '记录类型,1答卷2面谈';
2020-06-11 11:42:19,912 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `content` `content` TEXT COMMENT '面谈内容';
2020-06-11 11:42:19,924 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `score` `score` VARCHAR(255) COMMENT '答卷总得分，用于导出Excel';
2020-06-11 11:42:19,936 INFO 34395 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `title` `title` VARCHAR(255) COMMENT '面谈标题或问卷标题';
2020-06-11 11:42:19,948 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_evaluation` `paper_evaluation` TEXT COMMENT '答卷评价';
2020-06-11 11:42:19,960 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_record` CHANGE `paper_exercises` `paper_exercises` TEXT COMMENT '用户的答卷答案';
2020-06-11 11:42:19,971 INFO 34395 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_record` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:19,973 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_record` FROM `project_psychology`
2020-06-11 11:42:19,975 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation` (`id` INTEGER auto_increment  COMMENT '预约id', `from_id` INTEGER NOT NULL COMMENT '来访者id', `to_id` INTEGER NOT NULL COMMENT '咨询师id', `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字', `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上', `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳', `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳', `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消', `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`), FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE) ENGINE=InnoDB;
2020-06-11 11:42:19,979 INFO 34395 [egg-sequelize](2ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation`;
2020-06-11 11:42:19,979 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:19,981 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_1' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:19,993 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_1`;
2020-06-11 11:42:19,995 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_CATALOG AS constraintCatalog, CONSTRAINT_NAME AS constraintName, CONSTRAINT_SCHEMA AS constraintSchema, CONSTRAINT_TYPE AS constraintType, TABLE_NAME AS tableName, TABLE_SCHEMA AS tableSchema from INFORMATION_SCHEMA.TABLE_CONSTRAINTS WHERE table_name='p_reservation' AND constraint_name = 'p_reservation_ibfk_2' AND TABLE_SCHEMA = 'project_psychology';
2020-06-11 11:42:20,008 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation`
      DROP FOREIGN KEY `p_reservation_ibfk_2`;
2020-06-11 11:42:20,028 INFO 34395 [egg-sequelize](19ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`from_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:42:20,047 INFO 34395 [egg-sequelize](18ms) Executed (default): ALTER TABLE `p_reservation` ADD FOREIGN KEY (`to_id`) REFERENCES `p_user` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE;
2020-06-11 11:42:20,059 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '类型名字';
2020-06-11 11:42:20,071 INFO 34395 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `method` `method` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:来访， 2:线上';
2020-06-11 11:42:20,084 INFO 34395 [egg-sequelize](10ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `date_time` `date_time` VARCHAR(13) NOT NULL COMMENT '当天日期时间戳';
2020-06-11 11:42:20,097 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `start_time` `start_time` VARCHAR(13) NOT NULL COMMENT '预约开始时间戳';
2020-06-11 11:42:20,109 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `end_time` `end_time` VARCHAR(13) NOT NULL COMMENT '预约结束时间戳';
2020-06-11 11:42:20,122 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `state` `state` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:20,133 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '预约状态，1待确认2确认待上门3成功上门4失约5咨询师主动取消';
2020-06-11 11:42:20,135 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation` FROM `project_psychology`
2020-06-11 11:42:20,136 INFO 34395 [egg-sequelize](0ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_reservation_type` (`id` INTEGER auto_increment  COMMENT '预约类型id', `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称', `description` TEXT NOT NULL COMMENT '预约类型描述', `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:42:20,138 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_reservation_type`;
2020-06-11 11:42:20,139 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_reservation_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:20,153 INFO 34395 [egg-sequelize](13ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `type_name` `type_name` VARCHAR(255) NOT NULL COMMENT '预约类型名称';
2020-06-11 11:42:20,165 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `description` `description` TEXT NOT NULL COMMENT '预约类型描述';
2020-06-11 11:42:20,176 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_reservation_type` CHANGE `status` `status` INTEGER(11) NOT NULL DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:20,178 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_reservation_type` FROM `project_psychology`
2020-06-11 11:42:20,180 INFO 34395 [egg-sequelize](1ms) Executed (default): CREATE TABLE IF NOT EXISTS `p_type` (`id` INTEGER auto_increment  COMMENT '症状种类id', `name` VARCHAR(255) COMMENT '症状名称', `symtom_free` TEXT COMMENT '无症状评价', `symtom_free_advice` TEXT COMMENT '无症状建议', `low` TEXT COMMENT '轻度症状评价', `low_advice` TEXT COMMENT '轻度症状建议', `middle` TEXT COMMENT '中度症状评价', `middle_advice` TEXT COMMENT '中度症状建议', `high` TEXT COMMENT '重度症状评价', `high_advice` TEXT COMMENT '重度症状建议', `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用', PRIMARY KEY (`id`)) ENGINE=InnoDB;
2020-06-11 11:42:20,182 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW FULL COLUMNS FROM `p_type`;
2020-06-11 11:42:20,182 INFO 34395 [egg-sequelize](1ms) Executed (default): SELECT CONSTRAINT_NAME as constraint_name,CONSTRAINT_NAME as constraintName,CONSTRAINT_SCHEMA as constraintSchema,CONSTRAINT_SCHEMA as constraintCatalog,TABLE_NAME as tableName,TABLE_SCHEMA as tableSchema,TABLE_SCHEMA as tableCatalog,COLUMN_NAME as columnName,REFERENCED_TABLE_SCHEMA as referencedTableSchema,REFERENCED_TABLE_SCHEMA as referencedTableCatalog,REFERENCED_TABLE_NAME as referencedTableName,REFERENCED_COLUMN_NAME as referencedColumnName FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE where TABLE_NAME = 'p_type' AND CONSTRAINT_NAME!='PRIMARY' AND CONSTRAINT_SCHEMA='project_psychology' AND REFERENCED_TABLE_NAME IS NOT NULL;
2020-06-11 11:42:20,195 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `name` `name` VARCHAR(255) COMMENT '症状名称';
2020-06-11 11:42:20,208 INFO 34395 [egg-sequelize](12ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free` `symtom_free` TEXT COMMENT '无症状评价';
2020-06-11 11:42:20,220 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `symtom_free_advice` `symtom_free_advice` TEXT COMMENT '无症状建议';
2020-06-11 11:42:20,232 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low` `low` TEXT COMMENT '轻度症状评价';
2020-06-11 11:42:20,244 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `low_advice` `low_advice` TEXT COMMENT '轻度症状建议';
2020-06-11 11:42:20,256 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle` `middle` TEXT COMMENT '中度症状评价';
2020-06-11 11:42:20,268 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `middle_advice` `middle_advice` TEXT COMMENT '中度症状建议';
2020-06-11 11:42:20,280 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high` `high` TEXT COMMENT '重度症状评价';
2020-06-11 11:42:20,292 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `high_advice` `high_advice` TEXT COMMENT '重度症状建议';
2020-06-11 11:42:20,304 INFO 34395 [egg-sequelize](11ms) Executed (default): ALTER TABLE `p_type` CHANGE `status` `status` INTEGER(11) DEFAULT 1 COMMENT '1:正常 0:停止使用';
2020-06-11 11:42:20,306 INFO 34395 [egg-sequelize](1ms) Executed (default): SHOW INDEX FROM `p_type` FROM `project_psychology`
2020-06-11 11:42:25,053 INFO 34413 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:54:52,271 INFO 35180 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:55:27,506 INFO 35216 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:57:01,397 INFO 35254 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:57:37,716 INFO 35278 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:58:05,207 INFO 35302 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:59:16,378 INFO 35335 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:59:27,981 INFO 35356 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 11:59:41,740 INFO 35377 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:26:33,039 INFO 35649 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:26:39,777 INFO 35649 [egg-sequelize](1ms) Executed (90ae379d-0870-4086-9357-f62c44dee266): START TRANSACTION;
2020-06-11 12:26:39,804 INFO 35649 [egg-sequelize](21ms) Executed (90ae379d-0870-4086-9357-f62c44dee266): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 12:26:39,823 INFO 35649 [egg-sequelize](13ms) Executed (90ae379d-0870-4086-9357-f62c44dee266): COMMIT;
2020-06-11 12:30:19,803 INFO 35649 [egg-sequelize](1ms) Executed (624e170f-17c0-4fe5-9803-91c2c4e7a09f): START TRANSACTION;
2020-06-11 12:30:19,814 INFO 35649 [egg-sequelize](2ms) Executed (624e170f-17c0-4fe5-9803-91c2c4e7a09f): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 12:30:19,829 INFO 35649 [egg-sequelize](10ms) Executed (624e170f-17c0-4fe5-9803-91c2c4e7a09f): COMMIT;
2020-06-11 12:32:29,253 INFO 35712 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:32:32,747 INFO 35712 [egg-sequelize](0ms) Executed (f460e711-4624-4067-b224-7c64359cfe38): START TRANSACTION;
2020-06-11 12:32:32,755 INFO 35712 [egg-sequelize](2ms) Executed (f460e711-4624-4067-b224-7c64359cfe38): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 12:32:32,762 INFO 35712 [egg-sequelize](2ms) Executed (f460e711-4624-4067-b224-7c64359cfe38): ROLLBACK;
2020-06-11 12:33:59,541 INFO 35745 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:35:39,408 INFO 35776 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:36:16,833 INFO 35804 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:36:42,713 INFO 35825 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:37:12,916 INFO 35849 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:37:21,035 INFO 35849 [egg-sequelize](2ms) Executed (e08a6998-104f-4f10-a030-ef74d3bc1186): START TRANSACTION;
2020-06-11 12:37:21,043 INFO 35849 [egg-sequelize](2ms) Executed (e08a6998-104f-4f10-a030-ef74d3bc1186): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 12:37:21,053 INFO 35849 [egg-sequelize](3ms) Executed (e08a6998-104f-4f10-a030-ef74d3bc1186): ROLLBACK;
2020-06-11 12:37:59,918 INFO 35876 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:38:02,193 INFO 35887 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:38:04,514 INFO 35887 [egg-sequelize](1ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): START TRANSACTION;
2020-06-11 12:38:04,521 INFO 35887 [egg-sequelize](2ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): INSERT INTO `p_role` (`id`,`name`,`status`) VALUES (DEFAULT,?,?);
2020-06-11 12:38:04,525 INFO 35887 [egg-sequelize](1ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 12:38:04,537 INFO 35887 [egg-sequelize](4ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (1)
2020-06-11 12:38:04,545 INFO 35887 [egg-sequelize](1ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 12:38:04,549 INFO 35887 [egg-sequelize](1ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (2)
2020-06-11 12:38:04,551 INFO 35887 [egg-sequelize](1ms) Executed (5d637abd-772e-4baa-a61b-9bdf6b121aed): COMMIT;
2020-06-11 12:38:54,399 INFO 35909 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:39:00,917 INFO 35920 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:40:21,981 INFO 35950 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:40:24,870 INFO 35950 [egg-sequelize](5ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:42:42,561 INFO 35984 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:42:46,350 INFO 35984 [egg-sequelize](5ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:43:00,096 INFO 36008 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:43:06,070 INFO 36027 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:43:09,088 INFO 36027 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:43:25,524 INFO 36043 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:43:27,023 INFO 36043 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:44:21,887 INFO 36071 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:47:08,384 INFO 36108 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:47:09,361 INFO 36108 [egg-sequelize](4ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:48:39,172 INFO 36108 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:48:39,292 INFO 36138 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:48:42,646 INFO 36138 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 12:52:19,471 INFO 36200 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 12:52:21,679 INFO 36200 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 15:41:28,176 INFO 37889 [egg-sequelize](3ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:44:11,234 INFO 37936 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:44:38,090 INFO 37963 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:44:46,323 INFO 37984 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:48:31,164 INFO 38032 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:48:57,024 INFO 38061 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:49:18,223 INFO 38090 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:58:22,177 INFO 38196 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:58:40,693 INFO 38223 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 15:58:42,194 INFO 38235 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:00:06,351 ERROR 38235 [-/::1/-/2ms PUT /api/role/update] nodejs.ReferenceError: checkData is not defined
    at RoleController.update (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:77:22)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 38235
hostname: yudeMacBook-Pro.local

2020-06-11 16:00:37,792 INFO 38270 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:00:39,560 ERROR 38270 [-/::1/-/19ms PUT /api/role/update] nodejs.TypeError: Cannot read property 'checkData' of undefined
    at RoleController.update (/Users/yuakira/dev/projects/Psychology2/app/controller/role.js:77:31)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/utils/index.js:44:21)
    at Object.classControllerMiddleware (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-core/lib/loader/mixin/controller.js:87:20)
    at Object.callFn (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/utils.js:12:21)
    at wrappedController (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/egg_router.js:322:18)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at next (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:45:18)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:190:18
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:44:32)
    at /Users/yuakira/dev/projects/Psychology2/node_modules/koa-compose/index.js:36:12
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/@eggjs/router/lib/router.js:195:33)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)

pid: 38270
hostname: yudeMacBook-Pro.local

2020-06-11 16:00:57,314 INFO 38294 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:03:37,287 INFO 38339 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:04:53,639 INFO 38374 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:04:54,779 INFO 38374 [egg-sequelize](2ms) Executed (eaff1e5a-6940-4616-8091-7da1afaaa209): START TRANSACTION;
2020-06-11 16:04:54,799 INFO 38374 [egg-sequelize](13ms) Executed (eaff1e5a-6940-4616-8091-7da1afaaa209): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:06:30,621 INFO 38429 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:06:33,005 INFO 38429 [egg-sequelize](1ms) Executed (cd9d5193-50bb-4bfe-968b-afb5b9b091e4): START TRANSACTION;
2020-06-11 16:06:49,957 INFO 38453 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:06:54,226 INFO 38453 [egg-sequelize](0ms) Executed (24e05a2e-4abc-446b-ba01-9c6f0991ca8c): START TRANSACTION;
2020-06-11 16:07:31,115 INFO 38477 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:07:33,590 INFO 38477 [egg-sequelize](0ms) Executed (c46c5dab-4794-401d-8dd6-d81a7135e991): START TRANSACTION;
2020-06-11 16:07:33,600 INFO 38477 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:07:33,611 INFO 38477 [egg-sequelize](2ms) Executed (c46c5dab-4794-401d-8dd6-d81a7135e991): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:08:49,870 INFO 38507 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:09:00,020 INFO 38528 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:09:01,703 INFO 38528 [egg-sequelize](1ms) Executed (8e41178a-24ca-4eea-8d15-f91de19c7dcd): START TRANSACTION;
2020-06-11 16:09:01,711 INFO 38528 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:09:01,724 INFO 38528 [egg-sequelize](2ms) Executed (8e41178a-24ca-4eea-8d15-f91de19c7dcd): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:09:01,725 INFO 38528 [egg-sequelize](1ms) Executed (default): SELECT `id` FROM `p_permission` AS `p_permission` WHERE (`p_permission`.`role_id` = 18 AND ((`p_permission`.`id` = '[object Object]')));
2020-06-11 16:09:24,521 INFO 38552 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:09:26,946 INFO 38552 [egg-sequelize](1ms) Executed (c11dab7f-14ee-41ac-8112-e9b43bd468d5): START TRANSACTION;
2020-06-11 16:09:26,955 INFO 38552 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:09:26,960 INFO 38552 [egg-sequelize](1ms) Executed (default): SELECT `id` FROM `p_permission` AS `p_permission` WHERE (`p_permission`.`role_id` = 18 AND ((`p_permission`.`id` = '[object Object]')));
2020-06-11 16:09:26,972 INFO 38552 [egg-sequelize](3ms) Executed (c11dab7f-14ee-41ac-8112-e9b43bd468d5): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:12:09,942 INFO 38593 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:12:11,296 INFO 38593 [egg-sequelize](0ms) Executed (e256ca43-8d60-4176-8283-1f597ffa8ccc): START TRANSACTION;
2020-06-11 16:12:11,305 INFO 38593 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:12:11,310 INFO 38593 [egg-sequelize](1ms) Executed (default): SELECT `id` FROM `p_permission` AS `p_permission` WHERE (`p_permission`.`role_id` = 18 AND ((`p_permission`.`id` = '[object Object]')));
2020-06-11 16:12:11,318 INFO 38593 [egg-sequelize](2ms) Executed (e256ca43-8d60-4176-8283-1f597ffa8ccc): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:13:02,716 INFO 38622 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:13:03,458 INFO 38622 [egg-sequelize](0ms) Executed (805aaab2-2150-41e9-b469-03d4b80ba1a0): START TRANSACTION;
2020-06-11 16:13:03,470 INFO 38622 [egg-sequelize](2ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:13:03,474 INFO 38622 [egg-sequelize](1ms) Executed (default): SELECT `id` FROM `p_permission` AS `p_permission` WHERE (`p_permission`.`role_id` = 18 AND ((`p_permission`.`id` = 1)));
2020-06-11 16:13:03,495 INFO 38622 [egg-sequelize](12ms) Executed (805aaab2-2150-41e9-b469-03d4b80ba1a0): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:13:47,162 INFO 38649 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:13:50,385 INFO 38649 [egg-sequelize](1ms) Executed (5226e4fd-57d5-4271-bc97-6e5976113c4a): START TRANSACTION;
2020-06-11 16:13:50,394 INFO 38649 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:13:50,404 INFO 38649 [egg-sequelize](2ms) Executed (default): UPDATE `p_permission` SET `role_id`=? WHERE `role_id` = ? AND `id` IN (NULL)
2020-06-11 16:13:50,408 INFO 38649 [egg-sequelize](1ms) Executed (5226e4fd-57d5-4271-bc97-6e5976113c4a): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:15:26,280 INFO 38682 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:15:26,908 INFO 38682 [egg-sequelize](0ms) Executed (93222ece-1a0c-47ed-aed7-2e81e40af572): START TRANSACTION;
2020-06-11 16:15:26,917 INFO 38682 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:15:26,924 INFO 38682 [egg-sequelize](4ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 18;
2020-06-11 16:15:26,938 INFO 38682 [egg-sequelize](3ms) Executed (93222ece-1a0c-47ed-aed7-2e81e40af572): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:16:46,284 INFO 38709 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:17:05,293 INFO 38733 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:17:07,354 INFO 38733 [egg-sequelize](1ms) Executed (a425f426-1d3f-48c6-9763-a90930909afb): START TRANSACTION;
2020-06-11 16:17:07,364 INFO 38733 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:17:07,369 INFO 38733 [egg-sequelize](1ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 18;
2020-06-11 16:17:07,385 INFO 38733 [egg-sequelize](6ms) Executed (default): UPDATE `p_permission` SET `role_id`=? WHERE `role_id` = ? AND `id` IN (1, 2)
2020-06-11 16:17:07,389 INFO 38733 [egg-sequelize](1ms) Executed (a425f426-1d3f-48c6-9763-a90930909afb): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:26:36,873 INFO 39258 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:27:40,733 INFO 39258 [egg-sequelize](1ms) Executed (8b464dcd-c03a-48bf-9ff3-07fd4f569c25): START TRANSACTION;
2020-06-11 16:27:40,744 INFO 39258 [egg-sequelize](2ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:27:40,755 INFO 39258 [egg-sequelize](4ms) Executed (8b464dcd-c03a-48bf-9ff3-07fd4f569c25): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:27:40,760 INFO 39258 [egg-sequelize](1ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 18;
2020-06-11 16:27:40,772 INFO 39258 [egg-sequelize](3ms) Executed (default): DELETE FROM `p_permission` WHERE `id` = 2
2020-06-11 16:27:40,772 INFO 39258 [egg-sequelize](6ms) Executed (default): DELETE FROM `p_permission` WHERE `id` = 1
2020-06-11 16:28:11,683 INFO 39290 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:28:58,988 INFO 39318 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:29:12,311 INFO 39339 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:30:26,161 INFO 39370 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:32:03,298 INFO 39402 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:32:46,308 INFO 39426 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:32:54,807 INFO 39450 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:33:04,604 INFO 39471 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:33:09,187 INFO 39482 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:33:12,974 INFO 39482 [egg-sequelize](1ms) Executed (9177c52e-b5c6-43e3-b522-f0938c556248): START TRANSACTION;
2020-06-11 16:33:12,984 INFO 39482 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:33:12,995 INFO 39482 [egg-sequelize](3ms) Executed (9177c52e-b5c6-43e3-b522-f0938c556248): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:33:12,998 INFO 39482 [egg-sequelize](1ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 18;
2020-06-11 16:33:13,013 INFO 39482 [egg-sequelize](4ms) Executed (9177c52e-b5c6-43e3-b522-f0938c556248): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 16:34:20,492 INFO 39503 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:34:20,701 INFO 39503 [egg-sequelize](1ms) Executed (61f15645-2805-443c-8622-ef9a512ef5db): START TRANSACTION;
2020-06-11 16:34:20,711 INFO 39503 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:34:20,720 INFO 39503 [egg-sequelize](2ms) Executed (61f15645-2805-443c-8622-ef9a512ef5db): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:34:20,723 INFO 39503 [egg-sequelize](0ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 18;
2020-06-11 16:34:20,732 INFO 39503 [egg-sequelize](1ms) Executed (61f15645-2805-443c-8622-ef9a512ef5db): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 16:34:54,986 INFO 39528 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:35:12,669 INFO 39549 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:35:13,763 INFO 39549 [egg-sequelize](1ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): START TRANSACTION;
2020-06-11 16:35:13,772 INFO 39549 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '18' AND `p_role`.`status` = 1;
2020-06-11 16:35:13,781 INFO 39549 [egg-sequelize](2ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:35:13,784 INFO 39549 [egg-sequelize](0ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 18;
2020-06-11 16:35:13,792 INFO 39549 [egg-sequelize](1ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 16:35:13,797 INFO 39549 [egg-sequelize](0ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (5)
2020-06-11 16:35:13,801 INFO 39549 [egg-sequelize](2ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 16:35:13,804 INFO 39549 [egg-sequelize](1ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (6)
2020-06-11 16:35:13,806 INFO 39549 [egg-sequelize](1ms) Executed (bd498ddc-b5f7-496e-a1a1-74db5b76c1d7): COMMIT;
2020-06-11 16:35:42,091 INFO 39574 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:53:16,866 INFO 39736 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:54:04,707 INFO 39768 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:54:47,719 INFO 39795 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:55:20,072 INFO 39822 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:55:53,154 INFO 39822 [egg-sequelize](4ms) Executed (default): UPDATE `p_reservation_type` SET `status`=? WHERE `id` = ? AND `status` = ?
2020-06-11 16:56:33,066 INFO 39856 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 16:56:35,982 INFO 39856 [egg-sequelize](7ms) Executed (default): UPDATE `p_role` SET `status`=? WHERE `id` = ? AND `status` = ?
2020-06-11 17:01:30,900 INFO 40029 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:03:20,961 INFO 40066 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:03:44,730 INFO 40088 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:04:30,376 INFO 40118 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:05:52,106 INFO 40118 [egg-sequelize](5ms) Executed (default): SELECT `p_user`.`id`, `p_user`.`account`, `p_user`.`phone`, `p_user`.`password`, `p_user`.`name`, `p_user`.`birthday`, `p_user`.`gender`, `p_user`.`avatar`, `p_user`.`criminal_id`, `p_user`.`justice_id`, `p_user`.`parent_id`, `p_user`.`is_marry`, `p_user`.`education`, `p_user`.`job`, `p_user`.`urgent_name`, `p_user`.`urgent_relation`, `p_user`.`urgent_phone`, `p_user`.`role_id`, `p_user`.`status`, `roles`.`id` AS `roles.id`, `roles`.`name` AS `roles.name` FROM `p_user` AS `p_user` LEFT OUTER JOIN `p_role` AS `roles` ON `p_user`.`role_id` = `roles`.`id` WHERE `p_user`.`account` = 'admin' AND `p_user`.`password` = '123456' AND `p_user`.`status` = 1 LIMIT 1;
2020-06-11 17:06:34,620 INFO 40118 [egg-sequelize](4ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:06:52,669 INFO 40160 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:07:25,979 INFO 40197 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:07:27,959 ERROR 40197 [-/::1/-/19ms GET /api/role/get] nodejs.ReferenceError: _getRedis is not defined
    at permissionCheck (/Users/yuakira/dev/projects/Psychology2/app/middleware/permissionCheck.js:10:26)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:19)
    at dispatch (/Users/yuakira/dev/projects/Psychology2/node_modules/koa/node_modules/koa-compose/index.js:42:32)
    at isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:19)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:41:56
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 40197
hostname: yudeMacBook-Pro.local

2020-06-11 17:08:18,655 INFO 40228 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:08:20,980 ERROR 40228 [-/::1/-/15ms GET /api/role/get] nodejs.ReferenceError: ignoreArr is not defined
    at permissionCheck (/Users/yuakira/dev/projects/Psychology2/app/middleware/permissionCheck.js:14:59)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:15:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:41:56
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 40228
hostname: yudeMacBook-Pro.local

2020-06-11 17:08:41,520 INFO 40252 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:08:42,709 INFO 40252 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:09:29,412 INFO 40282 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:09:30,142 INFO 40282 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:09:52,323 INFO 40308 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:09:53,007 INFO 40308 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:10:39,954 INFO 40332 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:10:41,108 INFO 40332 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:11:46,245 INFO 40361 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:11:46,895 INFO 40361 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:13:02,772 INFO 40361 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:13:19,942 INFO 40404 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:13:20,880 INFO 40404 [egg-sequelize](4ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:14:08,858 INFO 40428 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:15:57,264 INFO 40461 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:16:07,152 INFO 40482 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:17:25,378 INFO 40513 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:17:28,253 INFO 40513 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:18:39,217 INFO 40541 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:20:12,633 INFO 40571 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:20:17,266 INFO 40585 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:20:33,350 INFO 40606 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:20:47,720 INFO 40631 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:21:16,445 INFO 40677 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:21:25,451 INFO 40688 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:21:27,036 INFO 40688 [egg-sequelize](2ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:21:27,040 INFO 40688 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:21:47,663 INFO 40688 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:21:47,666 INFO 40688 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:21:47,663 INFO 40712 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:21:56,929 INFO 40733 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:21:58,355 INFO 40735 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:21:58,987 INFO 40736 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:22:00,890 INFO 40736 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:22:00,900 INFO 40736 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:23:29,641 INFO 40763 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:23:33,136 INFO 40774 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:24:45,801 INFO 40801 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:24:47,434 INFO 40815 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:24:50,754 INFO 40815 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:24:50,766 INFO 40815 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:27:27,045 INFO 40842 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:30:11,840 INFO 40879 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:30:20,079 INFO 40903 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:30:20,592 INFO 40903 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:30:20,603 INFO 40903 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:30:43,387 INFO 40924 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:33:35,054 INFO 40989 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:33:41,879 INFO 41013 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:33:55,547 INFO 41031 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:34:07,272 INFO 41052 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:34:08,256 INFO 41052 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:34:08,266 INFO 41052 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:34:29,070 INFO 41076 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:34:32,107 INFO 41087 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:35:40,722 INFO 41136 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:35:42,927 INFO 41147 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:39:26,894 INFO 41147 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:58:31,097 INFO 41654 [egg-sequelize](2ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:58:41,329 INFO 41680 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:58:46,119 INFO 41680 [egg-sequelize](17ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:58:46,130 INFO 41680 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
2020-06-11 17:58:58,795 INFO 41704 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:59:33,470 INFO 41730 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 17:59:34,542 INFO 41730 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 17:59:45,817 INFO 41754 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:00:16,004 INFO 41784 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:00:16,066 INFO 41784 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:00:38,254 INFO 41809 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:00:41,352 INFO 41809 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:03:59,945 INFO 41809 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:04:19,483 INFO 41881 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:04:21,460 INFO 41881 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:04:21,486 INFO 41881 [egg-sequelize](13ms) Executed (default): UPDATE `p_role` SET `status`=? WHERE `id` = ? AND `status` = ?
2020-06-11 18:04:27,007 INFO 41905 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:04:49,517 INFO 41916 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:05:01,412 INFO 41940 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:05:06,635 INFO 41951 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:07:28,246 INFO 41992 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:07:47,082 INFO 42016 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:07:51,125 INFO 42027 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:07:51,904 INFO 42027 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:07:51,906 ERROR 42027 [-/::1/-/24ms DELETE /api/role/del?id=1] nodejs.TypeError: Cannot read property 'permissions' of null
    at permissionCheck (/Users/yuakira/dev/projects/Psychology2/app/middleware/permissionCheck.js:26:12)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:12:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 42027
hostname: yudeMacBook-Pro.local

2020-06-11 18:08:40,522 INFO 42027 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:08:40,523 ERROR 42027 [-/::1/-/10ms DELETE /api/role/del?id=1] nodejs.TypeError: Cannot read property 'permissions' of null
    at permissionCheck (/Users/yuakira/dev/projects/Psychology2/app/middleware/permissionCheck.js:26:12)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:12:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 42027
hostname: yudeMacBook-Pro.local

2020-06-11 18:09:20,620 INFO 42061 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:09:21,113 INFO 42061 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:09:21,116 ERROR 42061 [-/::1/-/29ms DELETE /api/role/del?id=1] nodejs.TypeError: Cannot read property 'permissions' of null
    at permissionCheck (/Users/yuakira/dev/projects/Psychology2/app/middleware/permissionCheck.js:28:12)
    at async responseOption (/Users/yuakira/dev/projects/Psychology2/app/middleware/responseOption.js:11:13)
    at async isLogin (/Users/yuakira/dev/projects/Psychology2/app/middleware/isLogin.js:12:13)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/egg-development/app/middleware/egg_loader_trace.js:9:50
    at async xframe (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xframe.js:7:5)
    at async xssProtection (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/xssProtection.js:7:5)
    at async nosniff (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/nosniff.js:8:5)
    at async noopen (/Users/yuakira/dev/projects/Psychology2/node_modules/egg-security/lib/middlewares/noopen.js:8:5)
    at async session (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-session/index.js:41:7)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:95:5)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)

pid: 42061
hostname: yudeMacBook-Pro.local

2020-06-11 18:10:01,456 INFO 42061 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:12:01,812 WARN 42061 [-/::1/-/1ms PUT /api/role/update] nodejs.SyntaxError: Unexpected token ， in JSON at position 61, check bodyParser config
    at JSON.parse (<anonymous>)
    at parse (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:57:17)
    at AsyncFunction.module.exports [as json] (/Users/yuakira/dev/projects/Psychology2/node_modules/co-body/lib/json.js:41:20)
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
    at async parseBody (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:100:14)
    at async bodyParser (/Users/yuakira/dev/projects/Psychology2/node_modules/koa-bodyparser/index.js:85:19)
    at async /Users/yuakira/dev/projects/Psychology2/node_modules/koa-static-cache/index.js:39:63
    at async notfound (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/notfound.js:5:5)
    at async meta (/Users/yuakira/dev/projects/Psychology2/node_modules/egg/app/middleware/meta.js:12:5)
    at async cors (/Users/yuakira/dev/projects/Psychology2/node_modules/@koa/cors/index.js:56:32)
status: 400
body: "{\n\t\"id\":\"1\",\n\t\"name\":\"admin\",\n\t\"permissions\":[\"base\",\"record\"，\"role\"]\n}"
pid: 42061
hostname: yudeMacBook-Pro.local

2020-06-11 18:12:56,045 INFO 42061 [egg-sequelize](1ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:13:26,946 INFO 42128 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:13:27,299 INFO 42128 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:13:27,310 INFO 42128 [egg-sequelize](0ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): START TRANSACTION;
2020-06-11 18:13:27,315 INFO 42128 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '1' AND `p_role`.`status` = 1;
2020-06-11 18:13:27,326 INFO 42128 [egg-sequelize](2ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 18:13:27,329 INFO 42128 [egg-sequelize](1ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 1;
2020-06-11 18:13:27,337 INFO 42128 [egg-sequelize](4ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): DELETE FROM `p_permission` WHERE `id` = 5
2020-06-11 18:13:27,337 INFO 42128 [egg-sequelize](4ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): DELETE FROM `p_permission` WHERE `id` = 6
2020-06-11 18:13:27,340 INFO 42128 [egg-sequelize](6ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:13:27,344 INFO 42128 [egg-sequelize](1ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (7)
2020-06-11 18:13:27,347 INFO 42128 [egg-sequelize](1ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:13:27,350 INFO 42128 [egg-sequelize](1ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (8)
2020-06-11 18:13:27,352 INFO 42128 [egg-sequelize](1ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:13:27,355 INFO 42128 [egg-sequelize](1ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (9)
2020-06-11 18:13:27,357 INFO 42128 [egg-sequelize](1ms) Executed (17ee55c3-0f55-4022-b489-ebd90877cf9b): COMMIT;
2020-06-11 18:13:34,508 INFO 42139 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:13:38,749 INFO 42150 [egg-sequelize](1ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:13:39,391 INFO 42150 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:13:39,402 INFO 42150 [egg-sequelize](1ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): START TRANSACTION;
2020-06-11 18:13:39,407 INFO 42150 [egg-sequelize](1ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '1' AND `p_role`.`status` = 1;
2020-06-11 18:13:39,420 INFO 42150 [egg-sequelize](3ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 18:13:39,423 INFO 42150 [egg-sequelize](2ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 1;
2020-06-11 18:13:39,429 INFO 42150 [egg-sequelize](2ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): DELETE FROM `p_permission` WHERE `id` = 7
2020-06-11 18:13:39,430 INFO 42150 [egg-sequelize](2ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): DELETE FROM `p_permission` WHERE `id` = 8
2020-06-11 18:13:39,430 INFO 42150 [egg-sequelize](2ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): DELETE FROM `p_permission` WHERE `id` = 9
2020-06-11 18:13:39,431 INFO 42150 [egg-sequelize](2ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:13:39,435 INFO 42150 [egg-sequelize](1ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (10)
2020-06-11 18:13:39,437 INFO 42150 [egg-sequelize](1ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:13:39,440 INFO 42150 [egg-sequelize](1ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (11)
2020-06-11 18:13:39,442 INFO 42150 [egg-sequelize](0ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:13:39,445 INFO 42150 [egg-sequelize](1ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (12)
2020-06-11 18:13:39,447 INFO 42150 [egg-sequelize](1ms) Executed (f09213f6-5212-4ab3-b977-d400a6958eef): COMMIT;
2020-06-11 18:13:56,715 INFO 42170 [egg-sequelize](0ms) Executed (default): SELECT 1+1 AS result
2020-06-11 18:14:03,574 INFO 42170 [egg-sequelize](2ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 18:14:03,588 INFO 42170 [egg-sequelize](1ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): START TRANSACTION;
2020-06-11 18:14:03,593 INFO 42170 [egg-sequelize](2ms) Executed (default): SELECT `id`, `name`, `status` FROM `p_role` AS `p_role` WHERE `p_role`.`id` = '1' AND `p_role`.`status` = 1;
2020-06-11 18:14:03,603 INFO 42170 [egg-sequelize](2ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): UPDATE `p_role` SET `name`=? WHERE `id` = ? AND `status` = ?
2020-06-11 18:14:03,607 INFO 42170 [egg-sequelize](1ms) Executed (default): SELECT `id`, `apis`, `name`, `status`, `role_id` FROM `p_permission` AS `p_permission` WHERE `p_permission`.`role_id` = 1;
2020-06-11 18:14:03,614 INFO 42170 [egg-sequelize](3ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): DELETE FROM `p_permission` WHERE `id` = 10
2020-06-11 18:14:03,614 INFO 42170 [egg-sequelize](2ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): DELETE FROM `p_permission` WHERE `id` = 11
2020-06-11 18:14:03,615 INFO 42170 [egg-sequelize](3ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): DELETE FROM `p_permission` WHERE `id` = 12
2020-06-11 18:14:03,615 INFO 42170 [egg-sequelize](2ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:14:03,619 INFO 42170 [egg-sequelize](0ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (13)
2020-06-11 18:14:03,622 INFO 42170 [egg-sequelize](1ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:14:03,626 INFO 42170 [egg-sequelize](1ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (14)
2020-06-11 18:14:03,628 INFO 42170 [egg-sequelize](1ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): INSERT INTO `p_permission` (`id`,`apis`,`name`,`status`) VALUES (DEFAULT,?,?,?);
2020-06-11 18:14:03,631 INFO 42170 [egg-sequelize](1ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): UPDATE `p_permission` SET `role_id`=? WHERE `id` IN (15)
2020-06-11 18:14:03,632 INFO 42170 [egg-sequelize](0ms) Executed (e076fc62-c2fa-4272-8e1f-5312b0eaf98b): COMMIT;
2020-06-11 19:38:44,089 INFO 42170 [egg-sequelize](7ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `p_role`.`status`, `permissions`.`id` AS `permissions.id`, `permissions`.`apis` AS `permissions.apis`, `permissions`.`name` AS `permissions.name`, `permissions`.`status` AS `permissions.status`, `permissions`.`role_id` AS `permissions.role_id` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` WHERE `p_role`.`id` = 1 AND `p_role`.`status` = 1;
2020-06-11 19:38:44,129 INFO 42170 [egg-sequelize](3ms) Executed (default): SELECT `p_role`.`id`, `p_role`.`name`, `permissions`.`id` AS `permissions.id`, `permissions`.`name` AS `permissions.name`, `permissions`.`apis` AS `permissions.apis` FROM `p_role` AS `p_role` LEFT OUTER JOIN `p_permission` AS `permissions` ON `p_role`.`id` = `permissions`.`role_id` AND `permissions`.`status` = 1 WHERE `p_role`.`status` = 1;
